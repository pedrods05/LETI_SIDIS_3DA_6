<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="1939px" preserveAspectRatio="none" style="width:2339px;height:1939px;background:#FFFFFF;" version="1.1" viewBox="0 0 2339 1939" width="2339px" zoomAndPan="magnify"><title>Appointment Create - Sequence Diagram</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="272.2754" x="1040.5093" y="30.1074">Appointment Create - Sequence Diagram</text><g><title>Client</title><rect fill="#FFFFFF" height="704.4023" style="stroke:#181818;stroke-width:1;" width="10" x="20.8965" y="133.2422"/></g><g><title>AppointmentController</title><rect fill="#FFFFFF" height="663.8203" style="stroke:#181818;stroke-width:1;" width="10" x="245.4053" y="173.8242"/></g><g><title>AppointmentCommandService</title><rect fill="#FFFFFF" height="583.9473" style="stroke:#181818;stroke-width:1;" width="10" x="433.9873" y="205.1152"/></g><g><title>AppointmentService</title><rect fill="#FFFFFF" height="307.6191" style="stroke:#181818;stroke-width:1;" width="10" x="849.0127" y="236.4063"/></g><g><title>ExternalServiceClient</title><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1;" width="10" x="1165.2832" y="311.9883"/></g><g><title>ExternalServiceClient</title><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1;" width="10" x="1165.2832" y="374.5703"/></g><g><title>AppointmentRepository</title><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1;" width="10" x="1328.9619" y="481.4434"/></g><g><title>AppointmentRepository</title><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1;" width="10" x="1328.9619" y="1043.6816"/></g><g><title>RabbitMQ</title><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1;" width="10" x="1457.2339" y="619.6074"/></g><g><title>RabbitMQ</title><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1;" width="10" x="1457.2339" y="726.4805"/></g><g><title>RabbitMQ</title><rect fill="#FFFFFF" height="736.7129" style="stroke:#181818;stroke-width:1;" width="10" x="1457.2339" y="923.5176"/></g><g><title>AppointmentEventHandler</title><rect fill="#FFFFFF" height="736.7129" style="stroke:#181818;stroke-width:1;" width="10" x="1652.1772" y="923.5176"/></g><g><title>AppointmentQueryRepository</title><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1;" width="10" x="1929.3379" y="954.8086"/></g><g><title>AppointmentQueryRepository</title><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1;" width="10" x="1929.3379" y="1292.3496"/></g><g><title>AppointmentQueryRepository</title><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1;" width="10" x="1929.3379" y="1415.8535"/></g><g><title>AppointmentQueryRepository</title><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1;" width="10" x="1929.3379" y="1546.3574"/></g><g><title>AppointmentReminderHandler</title><rect fill="#FFFFFF" height="81.582" style="stroke:#181818;stroke-width:1;" width="10" x="2139.3232" y="1660.2305"/></g><rect fill="none" height="584.5488" style="stroke:#000000;stroke-width:1.5;" width="808.9614" x="1244.2002" y="1001.0996"/><rect fill="none" height="365.1719" style="stroke:#000000;stroke-width:1.5;" width="484.7012" x="1558.4604" y="1089.9727"/><g><title>Client</title><rect fill="#000000" fill-opacity="0.00000" height="1732.7344" width="8" x="21.8965" y="123.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="25" x2="25" y1="123.2422" y2="1855.9766"/></g><g><title>AppointmentController</title><rect fill="#000000" fill-opacity="0.00000" height="1732.7344" width="8" x="246.4053" y="123.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="249.7573" x2="249.7573" y1="123.2422" y2="1855.9766"/></g><g><title>AppointmentCommandService</title><rect fill="#000000" fill-opacity="0.00000" height="1732.7344" width="8" x="434.9873" y="123.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="438.0532" x2="438.0532" y1="123.2422" y2="1855.9766"/></g><g><title>AppointmentService</title><rect fill="#000000" fill-opacity="0.00000" height="1732.7344" width="8" x="850.0127" y="123.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="853.3682" x2="853.3682" y1="123.2422" y2="1855.9766"/></g><g><title>ExternalServiceClient</title><rect fill="#000000" fill-opacity="0.00000" height="1732.7344" width="8" x="1166.2832" y="123.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1169.3662" x2="1169.3662" y1="123.2422" y2="1855.9766"/></g><g><title>AppointmentRepository</title><rect fill="#000000" fill-opacity="0.00000" height="1732.7344" width="8" x="1329.9619" y="123.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1333.2002" x2="1333.2002" y1="123.2422" y2="1855.9766"/></g><g><title>RabbitMQ</title><rect fill="#000000" fill-opacity="0.00000" height="1732.7344" width="8" x="1458.2339" y="123.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1461.7236" x2="1461.7236" y1="123.2422" y2="1855.9766"/></g><g><title>AppointmentEventHandler</title><rect fill="#000000" fill-opacity="0.00000" height="1732.7344" width="8" x="1653.1772" y="123.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1656.4604" x2="1656.4604" y1="123.2422" y2="1855.9766"/></g><g><title>AppointmentQueryRepository</title><rect fill="#000000" fill-opacity="0.00000" height="1732.7344" width="8" x="1930.3379" y="123.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1933.5142" x2="1933.5142" y1="123.2422" y2="1855.9766"/></g><g><title>AppointmentReminderHandler</title><rect fill="#000000" fill-opacity="0.00000" height="1732.7344" width="8" x="2140.3232" y="123.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="2144.1616" x2="2144.1616" y1="123.2422" y2="1855.9766"/></g><g class="participant participant-head" data-participant="Client"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35.793" x="5" y="119.7285">Client</text><ellipse cx="25.8965" cy="53.1211" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M25.8965,61.1211 L25.8965,88.1211 M12.8965,69.1211 L38.8965,69.1211 M25.8965,88.1211 L12.8965,103.1211 M25.8965,88.1211 L38.8965,103.1211" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="Client"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35.793" x="5" y="1870.084">Client</text><ellipse cx="25.8965" cy="1882.0977" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M25.8965,1890.0977 L25.8965,1917.0977 M12.8965,1898.0977 L38.8965,1898.0977 M25.8965,1917.0977 L12.8965,1932.0977 M25.8965,1917.0977 L38.8965,1932.0977" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="Controller"><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="153.2959" x="173.7573" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139.2959" x="180.7573" y="111.7285">AppointmentController</text></g><g class="participant participant-tail" data-participant="Controller"><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="153.2959" x="173.7573" y="1854.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139.2959" x="180.7573" y="1877.084">AppointmentController</text></g><g class="participant participant-head" data-participant="CommandService"><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="203.8682" x="337.0532" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="189.8682" x="344.0532" y="111.7285">AppointmentCommandService</text></g><g class="participant participant-tail" data-participant="CommandService"><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="203.8682" x="337.0532" y="1854.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="189.8682" x="344.0532" y="1877.084">AppointmentCommandService</text></g><g class="participant participant-head" data-participant="Service"><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="139.2891" x="784.3682" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125.2891" x="791.3682" y="111.7285">AppointmentService</text></g><g class="participant participant-tail" data-participant="Service"><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="139.2891" x="784.3682" y="1854.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125.2891" x="791.3682" y="1877.084">AppointmentService</text></g><g class="participant participant-head" data-participant="ExternalClient"><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="147.834" x="1096.3662" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133.834" x="1103.3662" y="111.7285">ExternalServiceClient</text></g><g class="participant participant-tail" data-participant="ExternalClient"><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="147.834" x="1096.3662" y="1854.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133.834" x="1103.3662" y="1877.084">ExternalServiceClient</text></g><g class="participant participant-head" data-participant="WriteRepo"><rect fill="#E2E2F0" height="51.2422" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="159.5234" x="1254.2002" y="71"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="145.5234" x="1261.2002" y="93.1074">AppointmentRepository</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114.3447" x="1276.7896" y="111.7285">(Write Model - H2)</text></g><g class="participant participant-tail" data-participant="WriteRepo"><rect fill="#E2E2F0" height="51.2422" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="159.5234" x="1254.2002" y="1854.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="145.5234" x="1261.2002" y="1877.084">AppointmentRepository</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114.3447" x="1276.7896" y="1895.7051">(Write Model - H2)</text></g><g class="participant participant-head" data-participant="RabbitMQ"><rect fill="#E2E2F0" height="51.2422" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="77.0205" x="1423.7236" y="71"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63.0205" x="1430.7236" y="93.1074">RabbitMQ</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62.2686" x="1431.0996" y="111.7285">Exchange</text></g><g class="participant participant-tail" data-participant="RabbitMQ"><rect fill="#E2E2F0" height="51.2422" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="77.0205" x="1423.7236" y="1854.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63.0205" x="1430.7236" y="1877.084">RabbitMQ</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62.2686" x="1431.0996" y="1895.7051">Exchange</text></g><g class="participant participant-head" data-participant="EventHandler"><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="177.4336" x="1568.4604" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="163.4336" x="1575.4604" y="111.7285">AppointmentEventHandler</text></g><g class="participant participant-tail" data-participant="EventHandler"><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="177.4336" x="1568.4604" y="1854.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="163.4336" x="1575.4604" y="1877.084">AppointmentEventHandler</text></g><g class="participant participant-head" data-participant="ReadRepo"><rect fill="#E2E2F0" height="51.2422" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="197.6475" x="1835.5142" y="71"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="183.6475" x="1842.5142" y="93.1074">AppointmentQueryRepository</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="159.5098" x="1854.583" y="111.7285">(Read Model - MongoDB)</text></g><g class="participant participant-tail" data-participant="ReadRepo"><rect fill="#E2E2F0" height="51.2422" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="197.6475" x="1835.5142" y="1854.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="183.6475" x="1842.5142" y="1877.084">AppointmentQueryRepository</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="159.5098" x="1854.583" y="1895.7051">(Read Model - MongoDB)</text></g><g class="participant participant-head" data-participant="ReminderHandler"><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="202.3232" x="2043.1616" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="188.3232" x="2050.1616" y="111.7285">AppointmentReminderHandler</text></g><g class="participant participant-tail" data-participant="ReminderHandler"><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="202.3232" x="2043.1616" y="1854.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="188.3232" x="2050.1616" y="1877.084">AppointmentReminderHandler</text></g><g><title>Client</title><rect fill="#FFFFFF" height="704.4023" style="stroke:#181818;stroke-width:1;" width="10" x="20.8965" y="133.2422"/></g><g><title>AppointmentController</title><rect fill="#FFFFFF" height="663.8203" style="stroke:#181818;stroke-width:1;" width="10" x="245.4053" y="173.8242"/></g><g><title>AppointmentCommandService</title><rect fill="#FFFFFF" height="583.9473" style="stroke:#181818;stroke-width:1;" width="10" x="433.9873" y="205.1152"/></g><g><title>AppointmentService</title><rect fill="#FFFFFF" height="307.6191" style="stroke:#181818;stroke-width:1;" width="10" x="849.0127" y="236.4063"/></g><g><title>ExternalServiceClient</title><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1;" width="10" x="1165.2832" y="311.9883"/></g><g><title>ExternalServiceClient</title><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1;" width="10" x="1165.2832" y="374.5703"/></g><g><title>AppointmentRepository</title><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1;" width="10" x="1328.9619" y="481.4434"/></g><g><title>AppointmentRepository</title><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1;" width="10" x="1328.9619" y="1043.6816"/></g><g><title>RabbitMQ</title><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1;" width="10" x="1457.2339" y="619.6074"/></g><g><title>RabbitMQ</title><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1;" width="10" x="1457.2339" y="726.4805"/></g><g><title>RabbitMQ</title><rect fill="#FFFFFF" height="736.7129" style="stroke:#181818;stroke-width:1;" width="10" x="1457.2339" y="923.5176"/></g><g><title>AppointmentEventHandler</title><rect fill="#FFFFFF" height="736.7129" style="stroke:#181818;stroke-width:1;" width="10" x="1652.1772" y="923.5176"/></g><g><title>AppointmentQueryRepository</title><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1;" width="10" x="1929.3379" y="954.8086"/></g><g><title>AppointmentQueryRepository</title><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1;" width="10" x="1929.3379" y="1292.3496"/></g><g><title>AppointmentQueryRepository</title><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1;" width="10" x="1929.3379" y="1415.8535"/></g><g><title>AppointmentQueryRepository</title><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1;" width="10" x="1929.3379" y="1546.3574"/></g><g><title>AppointmentReminderHandler</title><rect fill="#FFFFFF" height="81.582" style="stroke:#181818;stroke-width:1;" width="10" x="2139.3232" y="1660.2305"/></g><g class="message" data-participant-1="Client" data-participant-2="Controller"><polygon fill="#181818" points="233.4053,169.8242,243.4053,173.8242,233.4053,177.8242,237.4053,173.8242" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="30.8965" x2="239.4053" y1="173.8242" y2="173.8242"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7.23" x="40.3965" y="159.916">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120.6689" x="83.4314" y="151.2705">POST /appointments</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184.2788" x="51.6265" y="168.5615">(ScheduleAppointmentRequest)</text></g><g class="message" data-participant-1="Controller" data-participant-2="CommandService"><polygon fill="#181818" points="421.9873,201.1152,431.9873,205.1152,421.9873,209.1152,425.9873,205.1152" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="255.4053" x2="427.9873" y1="205.1152" y2="205.1152"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7.23" x="271.155" y="199.8525">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135.8525" x="282.385" y="199.8525">createAppointment(dto)</text></g><g class="message" data-participant-1="CommandService" data-participant-2="Service"><polygon fill="#181818" points="837.0127,232.4063,847.0127,236.4063,837.0127,240.4063,841.0127,236.4063" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="443.9873" x2="843.0127" y1="236.4063" y2="236.4063"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7.23" x="572.9587" y="231.1436">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135.8525" x="584.1887" y="231.1436">createAppointment(dto)</text></g><g class="message" data-participant-1="Service" data-participant-2="Service"><line style="stroke:#181818;stroke-width:2;" x1="859.0127" x2="901.0127" y1="267.6973" y2="267.6973"/><line style="stroke:#181818;stroke-width:2;" x1="901.0127" x2="901.0127" y1="267.6973" y2="280.6973"/><line style="stroke:#181818;stroke-width:2;" x1="860.0127" x2="901.0127" y1="280.6973" y2="280.6973"/><polygon fill="#181818" points="870.0127,276.6973,860.0127,280.6973,870.0127,284.6973,866.0127,280.6973" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7.23" x="866.0127" y="262.4346">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151.0552" x="877.2427" y="262.4346">Validate appointment data</text></g><g class="message" data-participant-1="Service" data-participant-2="ExternalClient"><polygon fill="#181818" points="1153.2832,307.9883,1163.2832,311.9883,1153.2832,315.9883,1157.2832,311.9883" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="859.0127" x2="1159.2832" y1="311.9883" y2="311.9883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7.23" x="868.5127" y="306.7256">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="276.0405" x="879.7427" y="306.7256">createAppointmentInRecords(appointmentData)</text></g><g class="message" data-participant-1="ExternalClient" data-participant-2="Service"><polygon fill="#181818" points="870.0127,339.2793,860.0127,343.2793,870.0127,347.2793,866.0127,343.2793" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2,2;" x1="864.0127" x2="1169.2832" y1="343.2793" y2="343.2793"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7.23" x="918.7058" y="338.0166">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180.6543" x="929.9358" y="338.0166">Appointment created in records</text></g><g class="message" data-participant-1="Service" data-participant-2="ExternalClient"><polygon fill="#181818" points="1153.2832,370.5703,1163.2832,374.5703,1153.2832,378.5703,1157.2832,374.5703" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="859.0127" x2="1159.2832" y1="374.5703" y2="374.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7.23" x="934.9885" y="369.3076">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143.0889" x="946.2185" y="369.3076">getPatientById(patientId)</text></g><g class="message" data-participant-1="ExternalClient" data-participant-2="Service"><polygon fill="#181818" points="870.0127,401.8613,860.0127,405.8613,870.0127,409.8613,866.0127,405.8613" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2,2;" x1="864.0127" x2="1169.2832" y1="405.8613" y2="405.8613"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7.23" x="955.5603" y="400.5986">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106.9453" x="966.7903" y="400.5986">Patient data (Map)</text></g><g class="message" data-participant-1="Service" data-participant-2="Service"><line style="stroke:#181818;stroke-width:2;" x1="859.0127" x2="901.0127" y1="437.1523" y2="437.1523"/><line style="stroke:#181818;stroke-width:2;" x1="901.0127" x2="901.0127" y1="437.1523" y2="450.1523"/><line style="stroke:#181818;stroke-width:2;" x1="860.0127" x2="901.0127" y1="450.1523" y2="450.1523"/><polygon fill="#181818" points="870.0127,446.1523,860.0127,450.1523,870.0127,454.1523,866.0127,450.1523" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7.23" x="866.0127" y="431.8896">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="203.7979" x="877.2427" y="431.8896">Build Appointment with patient data</text></g><g class="message" data-participant-1="Service" data-participant-2="WriteRepo"><polygon fill="#181818" points="1316.9619,477.4434,1326.9619,481.4434,1316.9619,485.4434,1320.9619,481.4434" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="859.0127" x2="1322.9619" y1="481.4434" y2="481.4434"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="1030.9229" y="476.1807">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107.6689" x="1049.3828" y="476.1807">save(appointment)</text></g><g class="message" data-participant-1="WriteRepo" data-participant-2="Service"><polygon fill="#181818" points="870.0127,508.7344,860.0127,512.7344,870.0127,516.7344,866.0127,512.7344" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2,2;" x1="864.0127" x2="1332.9619" y1="512.7344" y2="512.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="1027.2815" y="507.4717">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119.9517" x="1045.7415" y="507.4717">Appointment (saved)</text></g><g class="message" data-participant-1="Service" data-participant-2="CommandService"><polygon fill="#181818" points="454.9873,540.0254,444.9873,544.0254,454.9873,548.0254,450.9873,544.0254" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2,2;" x1="448.9873" x2="853.0127" y1="544.0254" y2="544.0254"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="603.2742" y="538.7627">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72.9917" x="621.7341" y="538.7627">Appointment</text></g><g class="message" data-participant-1="CommandService" data-participant-2="CommandService"><line style="stroke:#181818;stroke-width:2;" x1="443.9873" x2="485.9873" y1="575.3164" y2="575.3164"/><line style="stroke:#181818;stroke-width:2;" x1="485.9873" x2="485.9873" y1="575.3164" y2="588.3164"/><line style="stroke:#181818;stroke-width:2;" x1="444.9873" x2="485.9873" y1="588.3164" y2="588.3164"/><polygon fill="#181818" points="454.9873,584.3164,444.9873,588.3164,454.9873,592.3164,450.9873,588.3164" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="450.9873" y="570.0537">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="273.8887" x="469.4473" y="570.0537">publishAppointmentCreatedEvent(appointment)</text></g><g class="message" data-participant-1="CommandService" data-participant-2="RabbitMQ"><polygon fill="#181818" points="1445.2339,615.6074,1455.2339,619.6074,1445.2339,623.6074,1449.2339,619.6074" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="443.9873" x2="1451.2339" y1="619.6074" y2="619.6074"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="805.6011" y="614.3447">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="271.5591" x="824.061" y="614.3447">convertAndSend("appointment.created", event)</text></g><g class="message" data-participant-1="RabbitMQ" data-participant-2="CommandService"><polygon fill="#181818" points="454.9873,646.8984,444.9873,650.8984,454.9873,654.8984,450.9873,650.8984" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2,2;" x1="448.9873" x2="1461.2339" y1="650.8984" y2="650.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="897.6252" y="645.6357">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92.5107" x="916.0852" y="645.6357">Event published</text></g><g class="message" data-participant-1="CommandService" data-participant-2="CommandService"><line style="stroke:#181818;stroke-width:2;" x1="443.9873" x2="485.9873" y1="682.1895" y2="682.1895"/><line style="stroke:#181818;stroke-width:2;" x1="485.9873" x2="485.9873" y1="682.1895" y2="695.1895"/><line style="stroke:#181818;stroke-width:2;" x1="444.9873" x2="485.9873" y1="695.1895" y2="695.1895"/><polygon fill="#181818" points="454.9873,691.1895,444.9873,695.1895,454.9873,699.1895,450.9873,695.1895" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="450.9873" y="676.9268">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="362.5654" x="469.4473" y="676.9268">publishAppointmentReminderEvent(appointment, "CREATED")</text></g><g class="message" data-participant-1="CommandService" data-participant-2="RabbitMQ"><polygon fill="#181818" points="1445.2339,722.4805,1455.2339,726.4805,1445.2339,730.4805,1449.2339,726.4805" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="443.9873" x2="1451.2339" y1="726.4805" y2="726.4805"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="801.6338" y="721.2178">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="279.4937" x="820.0938" y="721.2178">convertAndSend("appointment.reminder", event)</text></g><g class="message" data-participant-1="RabbitMQ" data-participant-2="CommandService"><polygon fill="#181818" points="454.9873,753.7715,444.9873,757.7715,454.9873,761.7715,450.9873,757.7715" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2,2;" x1="448.9873" x2="1461.2339" y1="757.7715" y2="757.7715"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="868.3625" y="752.5088">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151.0361" x="886.8225" y="752.5088">Reminder event published</text></g><g class="message" data-participant-1="CommandService" data-participant-2="Controller"><polygon fill="#181818" points="266.4053,785.0625,256.4053,789.0625,266.4053,793.0625,262.4053,789.0625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2,2;" x1="260.4053" x2="437.9873" y1="789.0625" y2="789.0625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="301.4705" y="783.7998">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72.9917" x="319.9304" y="783.7998">Appointment</text></g><g class="message" data-participant-1="Controller" data-participant-2="Client"><polygon fill="#181818" points="36.8965,833.6445,26.8965,837.6445,36.8965,841.6445,32.8965,837.6445" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2,2;" x1="30.8965" x2="249.4053" y1="837.6445" y2="837.6445"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="92.425" y="823.7363">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44.0845" x="125.3386" y="815.0908">200 OK</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72.9917" x="110.885" y="832.3818">Appointment</text></g><path d="M1467,850.6445 L1467,894.6445 L1684,894.6445 L1684,860.6445 L1674,850.6445 L1467,850.6445" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1674,850.6445 L1674,860.6445 L1684,860.6445 L1674,850.6445" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152.4707" x="1473" y="869.6729">Asynchronous processing:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="196.5552" x="1473" y="886.9639">Events are consumed by handlers</text><g class="message" data-participant-1="RabbitMQ" data-participant-2="EventHandler"><polygon fill="#181818" points="1640.1772,919.5176,1650.1772,923.5176,1640.1772,927.5176,1644.1772,923.5176" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="1467.2339" x2="1646.1772" y1="923.5176" y2="923.5176"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="1474.2339" y="918.2549">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152.4834" x="1492.6938" y="918.2549">AppointmentCreatedEvent</text></g><g class="message" data-participant-1="EventHandler" data-participant-2="ReadRepo"><polygon fill="#181818" points="1917.3379,950.8086,1927.3379,954.8086,1917.3379,958.8086,1921.3379,954.8086" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="1662.1772" x2="1923.3379" y1="954.8086" y2="954.8086"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="1717.5159" y="949.5459">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138.0234" x="1735.9758" y="949.5459">findById(appointmentId)</text></g><g class="message" data-participant-1="ReadRepo" data-participant-2="EventHandler"><polygon fill="#181818" points="1673.1772,982.0996,1663.1772,986.0996,1673.1772,990.0996,1669.1772,986.0996" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2,2;" x1="1667.1772" x2="1933.3379" y1="986.0996" y2="986.0996"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="1692.9209" y="980.8369">23</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192.2134" x="1711.3809" y="980.8369">Optional&lt;AppointmentSummary&gt;</text></g><path d="M1244.2002,1001.0996 L1304.3711,1001.0996 L1304.3711,1010.3906 L1294.3711,1020.3906 L1244.2002,1020.3906 L1244.2002,1001.0996" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="584.5488" style="stroke:#000000;stroke-width:1.5;" width="808.9614" x="1244.2002" y="1001.0996"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="15.1709" x="1259.2002" y="1016.1279">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="91.7061" x="1319.3711" y="1014.9697">[Summary exists]</text><g class="message" data-participant-1="EventHandler" data-participant-2="WriteRepo"><polygon fill="#181818" points="1349.9619,1039.6816,1339.9619,1043.6816,1349.9619,1047.6816,1345.9619,1043.6816" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="1343.9619" x2="1651.1772" y1="1043.6816" y2="1043.6816"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="1417.3279" y="1038.4189">24</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138.0234" x="1435.7878" y="1038.4189">findById(appointmentId)</text></g><g class="message" data-participant-1="WriteRepo" data-participant-2="EventHandler"><polygon fill="#181818" points="1640.1772,1070.9727,1650.1772,1074.9727,1640.1772,1078.9727,1644.1772,1074.9727" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2,2;" x1="1333.9619" x2="1646.1772" y1="1074.9727" y2="1074.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="1415.542" y="1069.71">25</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136.5952" x="1434.002" y="1069.71">Optional&lt;Appointment&gt;</text></g><path d="M1558.4604,1089.9727 L1618.6313,1089.9727 L1618.6313,1099.2637 L1608.6313,1109.2637 L1558.4604,1109.2637 L1558.4604,1089.9727" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="365.1719" style="stroke:#000000;stroke-width:1.5;" width="484.7012" x="1558.4604" y="1089.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="15.1709" x="1573.4604" y="1105.001">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="243.2085" x="1633.6313" y="1103.8428">[Appointment found and status is CANCELED]</text><g class="message" data-participant-1="EventHandler" data-participant-2="EventHandler"><line style="stroke:#181818;stroke-width:2;" x1="1662.1772" x2="1704.1772" y1="1132.5547" y2="1132.5547"/><line style="stroke:#181818;stroke-width:2;" x1="1704.1772" x2="1704.1772" y1="1132.5547" y2="1145.5547"/><line style="stroke:#181818;stroke-width:2;" x1="1663.1772" x2="1704.1772" y1="1145.5547" y2="1145.5547"/><polygon fill="#181818" points="1673.1772,1141.5547,1663.1772,1145.5547,1673.1772,1149.5547,1669.1772,1145.5547" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="1669.1772" y="1127.292">26</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143.0952" x="1687.6372" y="1127.292">Ignore old creation event</text></g><path d="M1667,1158.5547 L1667,1202.5547 L1832,1202.5547 L1832,1168.5547 L1822,1158.5547 L1667,1158.5547" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1822,1158.5547 L1822,1168.5547 L1832,1168.5547 L1822,1158.5547" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144.498" x="1673" y="1177.583">Prevents overwriting with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92.5171" x="1673" y="1194.874">outdated events</text><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="1558.4604" x2="2043.1616" y1="1209.1367" y2="1209.1367"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="273.1577" x="1563.4604" y="1221.0068">[Appointment found and status different from event]</text><g class="message" data-participant-1="EventHandler" data-participant-2="EventHandler"><line style="stroke:#181818;stroke-width:2;" x1="1662.1772" x2="1704.1772" y1="1248.0586" y2="1248.0586"/><line style="stroke:#181818;stroke-width:2;" x1="1704.1772" x2="1704.1772" y1="1248.0586" y2="1261.0586"/><line style="stroke:#181818;stroke-width:2;" x1="1663.1772" x2="1704.1772" y1="1261.0586" y2="1261.0586"/><polygon fill="#181818" points="1673.1772,1257.0586,1663.1772,1261.0586,1673.1772,1265.0586,1669.1772,1261.0586" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="1669.1772" y="1242.7959">27</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="224.7007" x="1687.6372" y="1242.7959">Update summary with write model data</text></g><g class="message" data-participant-1="EventHandler" data-participant-2="ReadRepo"><polygon fill="#181818" points="1917.3379,1288.3496,1927.3379,1292.3496,1917.3379,1296.3496,1921.3379,1292.3496" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="1662.1772" x2="1923.3379" y1="1292.3496" y2="1292.3496"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="1704.1636" y="1287.0869">28</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164.728" x="1722.6235" y="1287.0869">save(AppointmentSummary)</text></g><g class="message" data-participant-1="ReadRepo" data-participant-2="EventHandler"><polygon fill="#181818" points="1673.1772,1319.6406,1663.1772,1323.6406,1673.1772,1327.6406,1669.1772,1323.6406" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2,2;" x1="1667.1772" x2="1933.3379" y1="1323.6406" y2="1323.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="1770.5972" y="1318.3779">29</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36.8608" x="1789.0571" y="1318.3779">Saved</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="1558.4604" x2="2043.1616" y1="1332.6406" y2="1332.6406"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="128.9009" x="1563.4604" y="1344.5107">[Appointment not found]</text><g class="message" data-participant-1="EventHandler" data-participant-2="EventHandler"><line style="stroke:#181818;stroke-width:2;" x1="1662.1772" x2="1704.1772" y1="1371.5625" y2="1371.5625"/><line style="stroke:#181818;stroke-width:2;" x1="1704.1772" x2="1704.1772" y1="1371.5625" y2="1384.5625"/><line style="stroke:#181818;stroke-width:2;" x1="1663.1772" x2="1704.1772" y1="1384.5625" y2="1384.5625"/><polygon fill="#181818" points="1673.1772,1380.5625,1663.1772,1384.5625,1673.1772,1388.5625,1669.1772,1384.5625" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="1669.1772" y="1366.2998">30</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="188.5635" x="1687.6372" y="1366.2998">Create new summary from event</text></g><g class="message" data-participant-1="EventHandler" data-participant-2="ReadRepo"><polygon fill="#181818" points="1917.3379,1411.8535,1927.3379,1415.8535,1917.3379,1419.8535,1921.3379,1415.8535" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="1662.1772" x2="1923.3379" y1="1415.8535" y2="1415.8535"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="1704.1636" y="1410.5908">31</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164.728" x="1722.6235" y="1410.5908">save(AppointmentSummary)</text></g><g class="message" data-participant-1="ReadRepo" data-participant-2="EventHandler"><polygon fill="#181818" points="1673.1772,1443.1445,1663.1772,1447.1445,1673.1772,1451.1445,1669.1772,1447.1445" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2,2;" x1="1667.1772" x2="1933.3379" y1="1447.1445" y2="1447.1445"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="1770.5972" y="1441.8818">32</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36.8608" x="1789.0571" y="1441.8818">Saved</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="1244.2002" x2="2053.1616" y1="1463.1445" y2="1463.1445"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="127.3164" x="1249.2002" y="1475.0146">[Summary doesn't exist]</text><g class="message" data-participant-1="EventHandler" data-participant-2="EventHandler"><line style="stroke:#181818;stroke-width:2;" x1="1662.1772" x2="1704.1772" y1="1502.0664" y2="1502.0664"/><line style="stroke:#181818;stroke-width:2;" x1="1704.1772" x2="1704.1772" y1="1502.0664" y2="1515.0664"/><line style="stroke:#181818;stroke-width:2;" x1="1663.1772" x2="1704.1772" y1="1515.0664" y2="1515.0664"/><polygon fill="#181818" points="1673.1772,1511.0664,1663.1772,1515.0664,1673.1772,1519.0664,1669.1772,1515.0664" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="1669.1772" y="1496.8037">33</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="188.5635" x="1687.6372" y="1496.8037">Create new summary from event</text></g><g class="message" data-participant-1="EventHandler" data-participant-2="ReadRepo"><polygon fill="#181818" points="1917.3379,1542.3574,1927.3379,1546.3574,1917.3379,1550.3574,1921.3379,1546.3574" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="1662.1772" x2="1923.3379" y1="1546.3574" y2="1546.3574"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="1704.1636" y="1541.0947">34</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164.728" x="1722.6235" y="1541.0947">save(AppointmentSummary)</text></g><g class="message" data-participant-1="ReadRepo" data-participant-2="EventHandler"><polygon fill="#181818" points="1673.1772,1573.6484,1663.1772,1577.6484,1673.1772,1581.6484,1669.1772,1577.6484" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2,2;" x1="1667.1772" x2="1933.3379" y1="1577.6484" y2="1577.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="1770.5972" y="1572.3857">35</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36.8608" x="1789.0571" y="1572.3857">Saved</text></g><g class="message" data-participant-1="EventHandler" data-participant-2="EventHandler"><line style="stroke:#181818;stroke-width:2;" x1="1662.1772" x2="1704.1772" y1="1615.9395" y2="1615.9395"/><line style="stroke:#181818;stroke-width:2;" x1="1704.1772" x2="1704.1772" y1="1615.9395" y2="1628.9395"/><line style="stroke:#181818;stroke-width:2;" x1="1663.1772" x2="1704.1772" y1="1628.9395" y2="1628.9395"/><polygon fill="#181818" points="1673.1772,1624.9395,1663.1772,1628.9395,1673.1772,1632.9395,1669.1772,1628.9395" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="1669.1772" y="1610.6768">36</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="171.9897" x="1687.6372" y="1610.6768">Update MongoDB read model</text></g><g class="message" data-participant-1="RabbitMQ" data-participant-2="ReminderHandler"><polygon fill="#181818" points="2127.3232,1656.2305,2137.3232,1660.2305,2127.3232,1664.2305,2131.3232,1660.2305" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="1462.2339" x2="2133.3232" y1="1660.2305" y2="1660.2305"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="1710.2542" y="1654.9678">37</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162.5889" x="1728.7141" y="1654.9678">AppointmentReminderEvent</text></g><g class="message" data-participant-1="ReminderHandler" data-participant-2="ReminderHandler"><line style="stroke:#181818;stroke-width:2;" x1="2149.3232" x2="2191.3232" y1="1691.5215" y2="1691.5215"/><line style="stroke:#181818;stroke-width:2;" x1="2191.3232" x2="2191.3232" y1="1691.5215" y2="1704.5215"/><line style="stroke:#181818;stroke-width:2;" x1="2150.3232" x2="2191.3232" y1="1704.5215" y2="1704.5215"/><polygon fill="#181818" points="2160.3232,1700.5215,2150.3232,1704.5215,2160.3232,1708.5215,2156.3232,1704.5215" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="2156.3232" y="1686.2588">38</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157.5107" x="2174.7832" y="1686.2588">sendReminderEmail(event)</text></g><g class="message" data-participant-1="ReminderHandler" data-participant-2="ReminderHandler"><line style="stroke:#181818;stroke-width:2;" x1="2149.3232" x2="2191.3232" y1="1740.8125" y2="1740.8125"/><line style="stroke:#181818;stroke-width:2;" x1="2191.3232" x2="2191.3232" y1="1740.8125" y2="1753.8125"/><line style="stroke:#181818;stroke-width:2;" x1="2144.3232" x2="2191.3232" y1="1753.8125" y2="1753.8125"/><polygon fill="#181818" points="2154.3232,1749.8125,2144.3232,1753.8125,2154.3232,1757.8125,2150.3232,1753.8125" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="2156.3232" y="1735.5498">39</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117.7871" x="2174.7832" y="1735.5498">Log reminder details</text></g><path d="M255,1761.8125 L255,1840.8125 L593,1840.8125 L593,1771.8125 L583,1761.8125 L255,1761.8125" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M583,1761.8125 L583,1771.8125 L593,1771.8125 L583,1761.8125" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="317.9414" x="261" y="1780.8408">Este diagrama mostra a cria&#231;&#227;o de uma nova consulta.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="307.0996" x="261" y="1798.1318">A consulta &#233; salva no write model (H2) e eventos s&#227;o</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="304.2305" x="261" y="1815.4229">publicados no RabbitMQ para atualizar o read model</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="251.4624" x="261" y="1832.7139">(MongoDB) e enviar lembretes ao paciente.</text><!--SRC=[pLZDRkCs4BxhAGRkeGwmIHSv6aK0ntQnGTTDDadRIowqICj4958bAJlkw-oXw7FanJga98gqPQzhzD0S4f6S-VZD3sV8w5SkIg980GkIlcPALe9EP2uLVFUJ-qcqbz3iZug9bCsPrYHZuvnd0b8c35CzKcEbvEPvnTDNWV9mdII6cvp1k2mb5wP0FPWeHWo3ItXgb63AIOOeIK9IWoGcEKUv194DJtb9K6SG04oaC4hcELC381gwuH6DeY22FZ6rvYbhjCAfWvgXIg_ix0qT8KZUBDRKdNYxyWrh7bafDKUpjozY-BlYw9cvf2n7_towld18RjRAnI2FPB7WPlxbHSpUqXKHMKspdJwuusoDlpwXyQq7muc3MbygfhOHsKT6gESwboAJqzkQi5tPvniPNN11cGfPxCnXCbH6YgfOu3Vc1L_Rf6cSMV-1oviW-YDuk7zwXXz8jur6ba_fYj4gPz7kc7VQN0ImNGubtNUD7-R925ANl07Oa1eP8KLvbSHZYtWobCVeK_wDv9nQgS1Sm0aIIiSfsBFZdNXagLHK3mEOAQ84D7RoE1x2PKWgFENrNXIu05NlaL1s2FGOwOoP1sBiz-tsZWxB-lkEdaUnWNAkWk6Sb1Sdql88jnNFQMJgXfiLb05mgESFxmWqMRFGqO45tH7tNuTTExH0D2BUwNTxzsHlW19g7ydMNOIoMkHShyBYMWVQ5P7OkdsqjZPXAagnPigCxRAWmq6WUDMapk03i7Ni9b_RsezUAnsLbYcZeQKUu2nJsnArP-i764mUP-FdsNHmljcgGJ_RxfPUhVvl7R1JJ0-aodvzwwgbHMWExVN7Zt3_yuiuYEBhRJZRd3eXSQ1ujZ8WbnrZWB7UYdIbf92LXbB95EyON6GZN78XqK0KipxMLO6bPx65LTrCT8BU1ekR12wyYJfVP7AOr3rXw0f6s3gJSEJYtlJ14ImnCAvy1G6FIfXlcUs7SsVCxxuqN69r-Z6ye5GO3xMzYMBSOYKaDz1807lZscXq5S0kpw167I9grNggZPsEAzQtATyuhVxYvRP1qc6vMzhhAI0YQ4CCHfxZzMtyosJsUJPr2dqcnJJkCY4nCoGMRbTSa5DzIBn-d7DHMC7_F2XMfvd4Gxn1rfXyhle7Ch8or3M-MjIl-0HqWropupPIlbmovPQKB7R87ZVsrz9T37GJTzUTDkvYMRZBckjGXw2wb7NTQZ_JBhpgVhwrAqTo-CcsBY_ObxIz_a7FrJuwqGVD6qEmZVV32NxydnYFLZe7j2UNIgR5zwO-mSb_OVoPXlVpFSdWFcEjeSb9kToyBl0cYKyEbyLH6TzvEaILFEhPqLqlFEDz7J8W7BzCTiQz33GQvxSk2C-7JKy_HVcppA2z3Q3d3AhhkC3lF9NYwXLqLmornYLQFx09-auRHO1W6UJa_Q_thnBneS8L8TUaRfsv8LUssVeHlF-DUP6lhL1KIORuGWLMvvNKe14E5Tsz8oKKPr3Unyd-em2mjk73vK-YG8R11BoADmz8YoVM72LoLYmKCmoxkaJjr5uEs5NNoVy1]--></g></svg>