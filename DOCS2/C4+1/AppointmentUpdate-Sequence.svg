<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="2250px" preserveAspectRatio="none" style="width:2611px;height:2250px;background:#FFFFFF;" version="1.1" viewBox="0 0 2611 2250" width="2611px" zoomAndPan="magnify"><title>Appointment Update - Sequence Diagram</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="276.1445" x="1168.4961" y="30.1074">Appointment Update - Sequence Diagram</text><g><title>Client</title><rect fill="#FFFFFF" height="861.1973" style="stroke:#181818;stroke-width:1;" width="10" x="20.8965" y="133.2422"/></g><g><title>AppointmentController</title><rect fill="#FFFFFF" height="820.6152" style="stroke:#181818;stroke-width:1;" width="10" x="233.1162" y="173.8242"/></g><g><title>AppointmentCommandService</title><rect fill="#FFFFFF" height="740.7422" style="stroke:#181818;stroke-width:1;" width="10" x="502.4458" y="205.1152"/></g><g><title>AppointmentService</title><rect fill="#FFFFFF" height="307.6191" style="stroke:#181818;stroke-width:1;" width="10" x="917.4712" y="236.4063"/></g><g><title>ExternalServiceClient</title><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1;" width="10" x="1326.9888" y="374.5703"/></g><g><title>AppointmentRepository</title><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1;" width="10" x="1490.6675" y="267.6973"/></g><g><title>AppointmentRepository</title><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1;" width="10" x="1490.6675" y="481.4434"/></g><g><title>AppointmentRepository</title><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1;" width="10" x="1490.6675" y="1679.5215"/></g><g><title>RabbitMQ</title><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1;" width="10" x="1618.9395" y="645.8984"/></g><g><title>RabbitMQ</title><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1;" width="10" x="1618.9395" y="769.4023"/></g><g><title>RabbitMQ</title><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1;" width="10" x="1618.9395" y="876.2754"/></g><g><title>RabbitMQ</title><rect fill="#FFFFFF" height="337.25" style="stroke:#181818;stroke-width:1;" width="10" x="1618.9395" y="1106.6035"/></g><g><title>AppointmentEventHandler</title><rect fill="#FFFFFF" height="200.7461" style="stroke:#181818;stroke-width:1;" width="10" x="1827.5601" y="1106.6035"/></g><g><title>AppointmentEventHandler</title><rect fill="#FFFFFF" height="585.209" style="stroke:#181818;stroke-width:1;" width="10" x="1827.5601" y="1443.8535"/></g><g><title>AppointmentQueryRepository</title><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1;" width="10" x="2179.1807" y="1137.8945"/></g><g><title>AppointmentQueryRepository</title><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1;" width="10" x="2179.1807" y="1200.4766"/></g><g><title>AppointmentQueryRepository</title><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1;" width="10" x="2179.1807" y="1475.1445"/></g><g><title>AppointmentQueryRepository</title><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1;" width="10" x="2179.1807" y="1812.6855"/></g><g><title>AppointmentQueryRepository</title><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1;" width="10" x="2179.1807" y="1946.4805"/></g><g><title>AppointmentReminderHandler</title><rect fill="#FFFFFF" height="136.5039" style="stroke:#181818;stroke-width:1;" width="10" x="2389.166" y="1307.3496"/></g><rect fill="none" height="356.541" style="stroke:#000000;stroke-width:1.5;" width="1276.938" x="395.5117" y="559.0254"/><rect fill="none" height="980.041" style="stroke:#000000;stroke-width:1.5;" width="1208.231" x="1395.9058" y="1064.0215"/><rect fill="none" height="471.3359" style="stroke:#000000;stroke-width:1.5;" width="897.0986" x="1405.9058" y="1521.4355"/><rect fill="none" height="259.959" style="stroke:#000000;stroke-width:1.5;" width="559.1611" x="1733.8433" y="1725.8125"/><g><title>Client</title><rect fill="#000000" fill-opacity="0.00000" height="2044.2754" width="8" x="21.8965" y="123.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="25" x2="25" y1="123.2422" y2="2167.5176"/></g><g><title>AppointmentController</title><rect fill="#000000" fill-opacity="0.00000" height="2044.2754" width="8" x="234.1162" y="123.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="237.4683" x2="237.4683" y1="123.2422" y2="2167.5176"/></g><g><title>AppointmentCommandService</title><rect fill="#000000" fill-opacity="0.00000" height="2044.2754" width="8" x="503.4458" y="123.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="506.5117" x2="506.5117" y1="123.2422" y2="2167.5176"/></g><g><title>AppointmentService</title><rect fill="#000000" fill-opacity="0.00000" height="2044.2754" width="8" x="918.4712" y="123.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="921.8267" x2="921.8267" y1="123.2422" y2="2167.5176"/></g><g><title>ExternalServiceClient</title><rect fill="#000000" fill-opacity="0.00000" height="2044.2754" width="8" x="1327.9888" y="123.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1331.0718" x2="1331.0718" y1="123.2422" y2="2167.5176"/></g><g><title>AppointmentRepository</title><rect fill="#000000" fill-opacity="0.00000" height="2044.2754" width="8" x="1491.6675" y="123.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1494.9058" x2="1494.9058" y1="123.2422" y2="2167.5176"/></g><g><title>RabbitMQ</title><rect fill="#000000" fill-opacity="0.00000" height="2044.2754" width="8" x="1619.9395" y="123.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1623.4292" x2="1623.4292" y1="123.2422" y2="2167.5176"/></g><g><title>AppointmentEventHandler</title><rect fill="#000000" fill-opacity="0.00000" height="2044.2754" width="8" x="1828.5601" y="123.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1831.8433" x2="1831.8433" y1="123.2422" y2="2167.5176"/></g><g><title>AppointmentQueryRepository</title><rect fill="#000000" fill-opacity="0.00000" height="2044.2754" width="8" x="2180.1807" y="123.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="2183.3569" x2="2183.3569" y1="123.2422" y2="2167.5176"/></g><g><title>AppointmentReminderHandler</title><rect fill="#000000" fill-opacity="0.00000" height="2044.2754" width="8" x="2390.166" y="123.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="2394.0044" x2="2394.0044" y1="123.2422" y2="2167.5176"/></g><g class="participant participant-head" data-participant="Client"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35.793" x="5" y="119.7285">Client</text><ellipse cx="25.8965" cy="53.1211" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M25.8965,61.1211 L25.8965,88.1211 M12.8965,69.1211 L38.8965,69.1211 M25.8965,88.1211 L12.8965,103.1211 M25.8965,88.1211 L38.8965,103.1211" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="Client"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35.793" x="5" y="2181.625">Client</text><ellipse cx="25.8965" cy="2193.6387" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M25.8965,2201.6387 L25.8965,2228.6387 M12.8965,2209.6387 L38.8965,2209.6387 M25.8965,2228.6387 L12.8965,2243.6387 M25.8965,2228.6387 L38.8965,2243.6387" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="Controller"><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="153.2959" x="161.4683" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139.2959" x="168.4683" y="111.7285">AppointmentController</text></g><g class="participant participant-tail" data-participant="Controller"><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="153.2959" x="161.4683" y="2166.5176"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139.2959" x="168.4683" y="2188.625">AppointmentController</text></g><g class="participant participant-head" data-participant="CommandService"><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="203.8682" x="405.5117" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="189.8682" x="412.5117" y="111.7285">AppointmentCommandService</text></g><g class="participant participant-tail" data-participant="CommandService"><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="203.8682" x="405.5117" y="2166.5176"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="189.8682" x="412.5117" y="2188.625">AppointmentCommandService</text></g><g class="participant participant-head" data-participant="Service"><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="139.2891" x="852.8267" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125.2891" x="859.8267" y="111.7285">AppointmentService</text></g><g class="participant participant-tail" data-participant="Service"><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="139.2891" x="852.8267" y="2166.5176"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125.2891" x="859.8267" y="2188.625">AppointmentService</text></g><g class="participant participant-head" data-participant="ExternalClient"><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="147.834" x="1258.0718" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133.834" x="1265.0718" y="111.7285">ExternalServiceClient</text></g><g class="participant participant-tail" data-participant="ExternalClient"><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="147.834" x="1258.0718" y="2166.5176"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133.834" x="1265.0718" y="2188.625">ExternalServiceClient</text></g><g class="participant participant-head" data-participant="WriteRepo"><rect fill="#E2E2F0" height="51.2422" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="159.5234" x="1415.9058" y="71"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="145.5234" x="1422.9058" y="93.1074">AppointmentRepository</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114.3447" x="1438.4951" y="111.7285">(Write Model - H2)</text></g><g class="participant participant-tail" data-participant="WriteRepo"><rect fill="#E2E2F0" height="51.2422" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="159.5234" x="1415.9058" y="2166.5176"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="145.5234" x="1422.9058" y="2188.625">AppointmentRepository</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114.3447" x="1438.4951" y="2207.2461">(Write Model - H2)</text></g><g class="participant participant-head" data-participant="RabbitMQ"><rect fill="#E2E2F0" height="51.2422" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="77.0205" x="1585.4292" y="71"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63.0205" x="1592.4292" y="93.1074">RabbitMQ</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62.2686" x="1592.8052" y="111.7285">Exchange</text></g><g class="participant participant-tail" data-participant="RabbitMQ"><rect fill="#E2E2F0" height="51.2422" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="77.0205" x="1585.4292" y="2166.5176"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63.0205" x="1592.4292" y="2188.625">RabbitMQ</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62.2686" x="1592.8052" y="2207.2461">Exchange</text></g><g class="participant participant-head" data-participant="EventHandler"><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="177.4336" x="1743.8433" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="163.4336" x="1750.8433" y="111.7285">AppointmentEventHandler</text></g><g class="participant participant-tail" data-participant="EventHandler"><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="177.4336" x="1743.8433" y="2166.5176"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="163.4336" x="1750.8433" y="2188.625">AppointmentEventHandler</text></g><g class="participant participant-head" data-participant="ReadRepo"><rect fill="#E2E2F0" height="51.2422" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="197.6475" x="2085.3569" y="71"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="183.6475" x="2092.3569" y="93.1074">AppointmentQueryRepository</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="159.5098" x="2104.4258" y="111.7285">(Read Model - MongoDB)</text></g><g class="participant participant-tail" data-participant="ReadRepo"><rect fill="#E2E2F0" height="51.2422" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="197.6475" x="2085.3569" y="2166.5176"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="183.6475" x="2092.3569" y="2188.625">AppointmentQueryRepository</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="159.5098" x="2104.4258" y="2207.2461">(Read Model - MongoDB)</text></g><g class="participant participant-head" data-participant="ReminderHandler"><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="202.3232" x="2293.0044" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="188.3232" x="2300.0044" y="111.7285">AppointmentReminderHandler</text></g><g class="participant participant-tail" data-participant="ReminderHandler"><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="202.3232" x="2293.0044" y="2166.5176"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="188.3232" x="2300.0044" y="2188.625">AppointmentReminderHandler</text></g><g><title>Client</title><rect fill="#FFFFFF" height="861.1973" style="stroke:#181818;stroke-width:1;" width="10" x="20.8965" y="133.2422"/></g><g><title>AppointmentController</title><rect fill="#FFFFFF" height="820.6152" style="stroke:#181818;stroke-width:1;" width="10" x="233.1162" y="173.8242"/></g><g><title>AppointmentCommandService</title><rect fill="#FFFFFF" height="740.7422" style="stroke:#181818;stroke-width:1;" width="10" x="502.4458" y="205.1152"/></g><g><title>AppointmentService</title><rect fill="#FFFFFF" height="307.6191" style="stroke:#181818;stroke-width:1;" width="10" x="917.4712" y="236.4063"/></g><g><title>ExternalServiceClient</title><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1;" width="10" x="1326.9888" y="374.5703"/></g><g><title>AppointmentRepository</title><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1;" width="10" x="1490.6675" y="267.6973"/></g><g><title>AppointmentRepository</title><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1;" width="10" x="1490.6675" y="481.4434"/></g><g><title>AppointmentRepository</title><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1;" width="10" x="1490.6675" y="1679.5215"/></g><g><title>RabbitMQ</title><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1;" width="10" x="1618.9395" y="645.8984"/></g><g><title>RabbitMQ</title><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1;" width="10" x="1618.9395" y="769.4023"/></g><g><title>RabbitMQ</title><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1;" width="10" x="1618.9395" y="876.2754"/></g><g><title>RabbitMQ</title><rect fill="#FFFFFF" height="337.25" style="stroke:#181818;stroke-width:1;" width="10" x="1618.9395" y="1106.6035"/></g><g><title>AppointmentEventHandler</title><rect fill="#FFFFFF" height="200.7461" style="stroke:#181818;stroke-width:1;" width="10" x="1827.5601" y="1106.6035"/></g><g><title>AppointmentEventHandler</title><rect fill="#FFFFFF" height="585.209" style="stroke:#181818;stroke-width:1;" width="10" x="1827.5601" y="1443.8535"/></g><g><title>AppointmentQueryRepository</title><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1;" width="10" x="2179.1807" y="1137.8945"/></g><g><title>AppointmentQueryRepository</title><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1;" width="10" x="2179.1807" y="1200.4766"/></g><g><title>AppointmentQueryRepository</title><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1;" width="10" x="2179.1807" y="1475.1445"/></g><g><title>AppointmentQueryRepository</title><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1;" width="10" x="2179.1807" y="1812.6855"/></g><g><title>AppointmentQueryRepository</title><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1;" width="10" x="2179.1807" y="1946.4805"/></g><g><title>AppointmentReminderHandler</title><rect fill="#FFFFFF" height="136.5039" style="stroke:#181818;stroke-width:1;" width="10" x="2389.166" y="1307.3496"/></g><g class="message" data-participant-1="Client" data-participant-2="Controller"><polygon fill="#181818" points="221.1162,169.8242,231.1162,173.8242,221.1162,177.8242,225.1162,173.8242" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="30.8965" x2="227.1162" y1="173.8242" y2="173.8242"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7.23" x="40.3965" y="159.916">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133.688" x="70.7773" y="151.2705">PUT /appointments/{id}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="171.9897" x="51.6265" y="168.5615">(UpdateAppointmentRequest)</text></g><g class="message" data-participant-1="Controller" data-participant-2="CommandService"><polygon fill="#181818" points="490.4458,201.1152,500.4458,205.1152,490.4458,209.1152,494.4458,205.1152" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="243.1162" x2="496.4458" y1="205.1152" y2="205.1152"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7.23" x="252.6162" y="199.8525">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="229.0996" x="263.8462" y="199.8525">updateAppointment(appointmentId, dto)</text></g><g class="message" data-participant-1="CommandService" data-participant-2="Service"><polygon fill="#181818" points="905.4712,232.4063,915.4712,236.4063,905.4712,240.4063,909.4712,236.4063" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="512.4458" x2="911.4712" y1="236.4063" y2="236.4063"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7.23" x="594.7937" y="231.1436">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="229.0996" x="606.0237" y="231.1436">updateAppointment(appointmentId, dto)</text></g><g class="message" data-participant-1="Service" data-participant-2="WriteRepo"><polygon fill="#181818" points="1478.6675,263.6973,1488.6675,267.6973,1478.6675,271.6973,1482.6675,267.6973" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="927.4712" x2="1484.6675" y1="267.6973" y2="267.6973"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7.23" x="1134.4426" y="262.4346">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138.0234" x="1145.6726" y="262.4346">findById(appointmentId)</text></g><g class="message" data-participant-1="WriteRepo" data-participant-2="Service"><polygon fill="#181818" points="938.4712,294.9883,928.4712,298.9883,938.4712,302.9883,934.4712,298.9883" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2,2;" x1="932.4712" x2="1494.6675" y1="298.9883" y2="298.9883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7.23" x="1137.6567" y="293.7256">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136.5952" x="1148.8867" y="293.7256">Optional&lt;Appointment&gt;</text></g><g class="message" data-participant-1="Service" data-participant-2="Service"><line style="stroke:#181818;stroke-width:2;" x1="927.4712" x2="969.4712" y1="330.2793" y2="330.2793"/><line style="stroke:#181818;stroke-width:2;" x1="969.4712" x2="969.4712" y1="330.2793" y2="343.2793"/><line style="stroke:#181818;stroke-width:2;" x1="928.4712" x2="969.4712" y1="343.2793" y2="343.2793"/><polygon fill="#181818" points="938.4712,339.2793,928.4712,343.2793,938.4712,347.2793,934.4712,343.2793" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7.23" x="934.4712" y="325.0166">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150.3252" x="945.7012" y="325.0166">Prepare appointment data</text></g><g class="message" data-participant-1="Service" data-participant-2="ExternalClient"><polygon fill="#181818" points="1314.9888,370.5703,1324.9888,374.5703,1314.9888,378.5703,1318.9888,374.5703" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="927.4712" x2="1320.9888" y1="374.5703" y2="374.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7.23" x="936.9712" y="369.3076">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="369.2876" x="948.2012" y="369.3076">updateAppointmentInRecords(appointmentId, appointmentData)</text></g><g class="message" data-participant-1="ExternalClient" data-participant-2="Service"><polygon fill="#181818" points="938.4712,401.8613,928.4712,405.8613,938.4712,409.8613,934.4712,405.8613" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2,2;" x1="932.4712" x2="1330.9888" y1="405.8613" y2="405.8613"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7.23" x="1034.5051" y="400.5986">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179.2197" x="1045.7351" y="400.5986">Updated (or exception ignored)</text></g><g class="message" data-participant-1="Service" data-participant-2="Service"><line style="stroke:#181818;stroke-width:2;" x1="927.4712" x2="969.4712" y1="437.1523" y2="437.1523"/><line style="stroke:#181818;stroke-width:2;" x1="969.4712" x2="969.4712" y1="437.1523" y2="450.1523"/><line style="stroke:#181818;stroke-width:2;" x1="928.4712" x2="969.4712" y1="450.1523" y2="450.1523"/><polygon fill="#181818" points="938.4712,446.1523,928.4712,450.1523,938.4712,454.1523,934.4712,450.1523" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7.23" x="934.4712" y="431.8896">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151.0425" x="945.7012" y="431.8896">Update appointment fields</text></g><g class="message" data-participant-1="Service" data-participant-2="WriteRepo"><polygon fill="#181818" points="1478.6675,477.4434,1488.6675,481.4434,1478.6675,485.4434,1482.6675,481.4434" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="927.4712" x2="1484.6675" y1="481.4434" y2="481.4434"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="1146.0049" y="476.1807">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107.6689" x="1164.4648" y="476.1807">save(appointment)</text></g><g class="message" data-participant-1="WriteRepo" data-participant-2="Service"><polygon fill="#181818" points="938.4712,508.7344,928.4712,512.7344,938.4712,516.7344,934.4712,512.7344" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2,2;" x1="932.4712" x2="1494.6675" y1="512.7344" y2="512.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="1136.2126" y="507.4717">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132.2534" x="1154.6726" y="507.4717">Appointment (updated)</text></g><g class="message" data-participant-1="Service" data-participant-2="CommandService"><polygon fill="#181818" points="523.4458,540.0254,513.4458,544.0254,523.4458,548.0254,519.4458,544.0254" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2,2;" x1="517.4458" x2="921.4712" y1="544.0254" y2="544.0254"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="671.7327" y="538.7627">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72.9917" x="690.1926" y="538.7627">Appointment</text></g><path d="M395.5117,559.0254 L455.6826,559.0254 L455.6826,568.3164 L445.6826,578.3164 L395.5117,578.3164 L395.5117,559.0254" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="356.541" style="stroke:#000000;stroke-width:1.5;" width="1276.938" x="395.5117" y="559.0254"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="15.1709" x="410.5117" y="574.0537">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="117.3423" x="470.6826" y="572.8955">[Status is CANCELED]</text><g class="message" data-participant-1="CommandService" data-participant-2="CommandService"><line style="stroke:#181818;stroke-width:2;" x1="512.4458" x2="554.4458" y1="601.6074" y2="601.6074"/><line style="stroke:#181818;stroke-width:2;" x1="554.4458" x2="554.4458" y1="601.6074" y2="614.6074"/><line style="stroke:#181818;stroke-width:2;" x1="513.4458" x2="554.4458" y1="614.6074" y2="614.6074"/><polygon fill="#181818" points="523.4458,610.6074,513.4458,614.6074,523.4458,618.6074,519.4458,614.6074" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="519.4458" y="596.3447">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="282.5659" x="537.9058" y="596.3447">publishAppointmentCanceledEvent(appointment)</text></g><g class="message" data-participant-1="CommandService" data-participant-2="RabbitMQ"><polygon fill="#181818" points="1606.9395,641.8984,1616.9395,645.8984,1606.9395,649.8984,1610.9395,645.8984" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="512.4458" x2="1612.9395" y1="645.8984" y2="645.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="916.3445" y="640.6357">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="280.2363" x="934.8044" y="640.6357">convertAndSend("appointment.canceled", event)</text></g><g class="message" data-participant-1="RabbitMQ" data-participant-2="CommandService"><polygon fill="#181818" points="523.4458,673.1895,513.4458,677.1895,523.4458,681.1895,519.4458,677.1895" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2,2;" x1="517.4458" x2="1622.9395" y1="677.1895" y2="677.1895"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="991.3887" y="671.9268">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135.1479" x="1009.8486" y="671.9268">Cancel event published</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="395.5117" x2="1672.4497" y1="686.1895" y2="686.1895"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="143.6177" x="400.5117" y="698.0596">[Status is NOT CANCELED]</text><g class="message" data-participant-1="CommandService" data-participant-2="CommandService"><line style="stroke:#181818;stroke-width:2;" x1="512.4458" x2="554.4458" y1="725.1113" y2="725.1113"/><line style="stroke:#181818;stroke-width:2;" x1="554.4458" x2="554.4458" y1="725.1113" y2="738.1113"/><line style="stroke:#181818;stroke-width:2;" x1="513.4458" x2="554.4458" y1="738.1113" y2="738.1113"/><polygon fill="#181818" points="523.4458,734.1113,513.4458,738.1113,523.4458,742.1113,519.4458,738.1113" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="519.4458" y="719.8486">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="276.7896" x="537.9058" y="719.8486">publishAppointmentUpdatedEvent(appointment)</text></g><g class="message" data-participant-1="CommandService" data-participant-2="RabbitMQ"><polygon fill="#181818" points="1606.9395,765.4023,1616.9395,769.4023,1606.9395,773.4023,1610.9395,769.4023" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="512.4458" x2="1612.9395" y1="769.4023" y2="769.4023"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="918.8677" y="764.1396">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="275.1899" x="937.3276" y="764.1396">convertAndSend("appointment.updated", event)</text></g><g class="message" data-participant-1="RabbitMQ" data-participant-2="CommandService"><polygon fill="#181818" points="523.4458,796.6934,513.4458,800.6934,523.4458,804.6934,519.4458,800.6934" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2,2;" x1="517.4458" x2="1622.9395" y1="800.6934" y2="800.6934"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="990.6619" y="795.4307">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136.6016" x="1009.1218" y="795.4307">Update event published</text></g><g class="message" data-participant-1="CommandService" data-participant-2="CommandService"><line style="stroke:#181818;stroke-width:2;" x1="512.4458" x2="554.4458" y1="831.9844" y2="831.9844"/><line style="stroke:#181818;stroke-width:2;" x1="554.4458" x2="554.4458" y1="831.9844" y2="844.9844"/><line style="stroke:#181818;stroke-width:2;" x1="513.4458" x2="554.4458" y1="844.9844" y2="844.9844"/><polygon fill="#181818" points="523.4458,840.9844,513.4458,844.9844,523.4458,848.9844,519.4458,844.9844" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="519.4458" y="826.7217">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="362.5654" x="537.9058" y="826.7217">publishAppointmentReminderEvent(appointment, "UPDATED")</text></g><g class="message" data-participant-1="CommandService" data-participant-2="RabbitMQ"><polygon fill="#181818" points="1606.9395,872.2754,1616.9395,876.2754,1606.9395,880.2754,1610.9395,876.2754" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="512.4458" x2="1612.9395" y1="876.2754" y2="876.2754"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="916.7158" y="871.0127">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="279.4937" x="935.1758" y="871.0127">convertAndSend("appointment.reminder", event)</text></g><g class="message" data-participant-1="RabbitMQ" data-participant-2="CommandService"><polygon fill="#181818" points="523.4458,903.5664,513.4458,907.5664,523.4458,911.5664,519.4458,907.5664" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2,2;" x1="517.4458" x2="1622.9395" y1="907.5664" y2="907.5664"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="983.4446" y="902.3037">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151.0361" x="1001.9045" y="902.3037">Reminder event published</text></g><g class="message" data-participant-1="CommandService" data-participant-2="Controller"><polygon fill="#181818" points="254.1162,941.8574,244.1162,945.8574,254.1162,949.8574,250.1162,945.8574" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2,2;" x1="248.1162" x2="506.4458" y1="945.8574" y2="945.8574"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="329.5552" y="940.5947">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72.9917" x="348.0151" y="940.5947">Appointment</text></g><g class="message" data-participant-1="Controller" data-participant-2="Client"><polygon fill="#181818" points="36.8965,990.4395,26.8965,994.4395,36.8965,998.4395,32.8965,994.4395" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2,2;" x1="30.8965" x2="237.1162" y1="994.4395" y2="994.4395"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="86.2805" y="980.5313">23</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44.0845" x="119.1941" y="971.8857">200 OK</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72.9917" x="104.7405" y="989.1768">Appointment</text></g><path d="M1628,1007.4395 L1628,1051.4395 L1845,1051.4395 L1845,1017.4395 L1835,1007.4395 L1628,1007.4395" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1835,1007.4395 L1835,1017.4395 L1845,1017.4395 L1835,1007.4395" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152.4707" x="1634" y="1026.4678">Asynchronous processing:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="196.5552" x="1634" y="1043.7588">Events are consumed by handlers</text><path d="M1395.9058,1064.0215 L1456.0767,1064.0215 L1456.0767,1073.3125 L1446.0767,1083.3125 L1395.9058,1083.3125 L1395.9058,1064.0215" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="980.041" style="stroke:#000000;stroke-width:1.5;" width="1208.231" x="1395.9058" y="1064.0215"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="15.1709" x="1410.9058" y="1079.0498">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="164.3931" x="1471.0767" y="1077.8916">[Event is appointment.updated]</text><g class="message" data-participant-1="RabbitMQ" data-participant-2="EventHandler"><polygon fill="#181818" points="1815.5601,1102.6035,1825.5601,1106.6035,1815.5601,1110.6035,1819.5601,1106.6035" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="1628.9395" x2="1821.5601" y1="1106.6035" y2="1106.6035"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="1641.3276" y="1101.3408">24</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155.3843" x="1659.7876" y="1101.3408">AppointmentUpdatedEvent</text></g><g class="message" data-participant-1="EventHandler" data-participant-2="ReadRepo"><polygon fill="#181818" points="2167.1807,1133.8945,2177.1807,1137.8945,2167.1807,1141.8945,2171.1807,1137.8945" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="1837.5601" x2="2173.1807" y1="1137.8945" y2="1137.8945"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="1930.1287" y="1132.6318">25</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138.0234" x="1948.5886" y="1132.6318">findById(appointmentId)</text></g><g class="message" data-participant-1="ReadRepo" data-participant-2="EventHandler"><polygon fill="#181818" points="1848.5601,1165.1855,1838.5601,1169.1855,1848.5601,1173.1855,1844.5601,1169.1855" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2,2;" x1="1842.5601" x2="2183.1807" y1="1169.1855" y2="1169.1855"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="1905.5337" y="1163.9229">26</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192.2134" x="1923.9937" y="1163.9229">Optional&lt;AppointmentSummary&gt;</text></g><g class="message" data-participant-1="EventHandler" data-participant-2="ReadRepo"><polygon fill="#181818" points="2167.1807,1196.4766,2177.1807,1200.4766,2167.1807,1204.4766,2171.1807,1200.4766" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="1837.5601" x2="2173.1807" y1="1200.4766" y2="1200.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="1891.4746" y="1195.2139">27</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="215.3315" x="1909.9346" y="1195.2139">save(updated AppointmentSummary)</text></g><g class="message" data-participant-1="ReadRepo" data-participant-2="EventHandler"><polygon fill="#181818" points="1848.5601,1227.7676,1838.5601,1231.7676,1848.5601,1235.7676,1844.5601,1231.7676" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2,2;" x1="1842.5601" x2="2183.1807" y1="1231.7676" y2="1231.7676"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="1983.21" y="1226.5049">28</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36.8608" x="2001.6699" y="1226.5049">Saved</text></g><g class="message" data-participant-1="EventHandler" data-participant-2="EventHandler"><line style="stroke:#181818;stroke-width:2;" x1="1837.5601" x2="1879.5601" y1="1263.0586" y2="1263.0586"/><line style="stroke:#181818;stroke-width:2;" x1="1879.5601" x2="1879.5601" y1="1263.0586" y2="1276.0586"/><line style="stroke:#181818;stroke-width:2;" x1="1838.5601" x2="1879.5601" y1="1276.0586" y2="1276.0586"/><polygon fill="#181818" points="1848.5601,1272.0586,1838.5601,1276.0586,1848.5601,1280.0586,1844.5601,1276.0586" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="1844.5601" y="1257.7959">29</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="171.9897" x="1863.02" y="1257.7959">Update MongoDB read model</text></g><g class="message" data-participant-1="RabbitMQ" data-participant-2="ReminderHandler"><polygon fill="#181818" points="2377.166,1303.3496,2387.166,1307.3496,2377.166,1311.3496,2381.166,1307.3496" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="1628.9395" x2="2383.166" y1="1307.3496" y2="1307.3496"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="1918.5283" y="1302.0869">30</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162.5889" x="1936.9883" y="1302.0869">AppointmentReminderEvent</text></g><g class="message" data-participant-1="ReminderHandler" data-participant-2="ReminderHandler"><line style="stroke:#181818;stroke-width:2;" x1="2399.166" x2="2441.166" y1="1338.6406" y2="1338.6406"/><line style="stroke:#181818;stroke-width:2;" x1="2441.166" x2="2441.166" y1="1338.6406" y2="1351.6406"/><line style="stroke:#181818;stroke-width:2;" x1="2400.166" x2="2441.166" y1="1351.6406" y2="1351.6406"/><polygon fill="#181818" points="2410.166,1347.6406,2400.166,1351.6406,2410.166,1355.6406,2406.166,1351.6406" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="2406.166" y="1333.3779">31</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157.5107" x="2424.626" y="1333.3779">sendReminderEmail(event)</text></g><g class="message" data-participant-1="ReminderHandler" data-participant-2="ReminderHandler"><line style="stroke:#181818;stroke-width:2;" x1="2399.166" x2="2441.166" y1="1382.9316" y2="1382.9316"/><line style="stroke:#181818;stroke-width:2;" x1="2441.166" x2="2441.166" y1="1382.9316" y2="1395.9316"/><line style="stroke:#181818;stroke-width:2;" x1="2400.166" x2="2441.166" y1="1395.9316" y2="1395.9316"/><polygon fill="#181818" points="2410.166,1391.9316,2400.166,1395.9316,2410.166,1399.9316,2406.166,1395.9316" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="2406.166" y="1377.6689">32</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117.7871" x="2424.626" y="1377.6689">Log reminder details</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="1395.9058" x2="2604.1367" y1="1404.9316" y2="1404.9316"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="168.7007" x="1400.9058" y="1416.8018">[Event is appointment.canceled]</text><g class="message" data-participant-1="RabbitMQ" data-participant-2="EventHandler"><polygon fill="#181818" points="1815.5601,1439.8535,1825.5601,1443.8535,1815.5601,1447.8535,1819.5601,1443.8535" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="1623.9395" x2="1821.5601" y1="1443.8535" y2="1443.8535"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="1635.9395" y="1438.5908">33</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161.1606" x="1654.3994" y="1438.5908">AppointmentCanceledEvent</text></g><g class="message" data-participant-1="EventHandler" data-participant-2="ReadRepo"><polygon fill="#181818" points="2167.1807,1471.1445,2177.1807,1475.1445,2167.1807,1479.1445,2171.1807,1475.1445" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="1837.5601" x2="2173.1807" y1="1475.1445" y2="1475.1445"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="1930.1287" y="1469.8818">34</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138.0234" x="1948.5886" y="1469.8818">findById(appointmentId)</text></g><g class="message" data-participant-1="ReadRepo" data-participant-2="EventHandler"><polygon fill="#181818" points="1848.5601,1502.4355,1838.5601,1506.4355,1848.5601,1510.4355,1844.5601,1506.4355" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2,2;" x1="1842.5601" x2="2183.1807" y1="1506.4355" y2="1506.4355"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="1905.5337" y="1501.1729">35</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192.2134" x="1923.9937" y="1501.1729">Optional&lt;AppointmentSummary&gt;</text></g><path d="M1405.9058,1521.4355 L1466.0767,1521.4355 L1466.0767,1530.7266 L1456.0767,1540.7266 L1405.9058,1540.7266 L1405.9058,1521.4355" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="471.3359" style="stroke:#000000;stroke-width:1.5;" width="897.0986" x="1405.9058" y="1521.4355"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="15.1709" x="1420.9058" y="1536.4639">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="319.6768" x="1481.0767" y="1535.3057">[Summary exists and status is SCHEDULED or COMPLETED]</text><g class="message" data-participant-1="EventHandler" data-participant-2="EventHandler"><line style="stroke:#181818;stroke-width:2;" x1="1837.5601" x2="1879.5601" y1="1564.0176" y2="1564.0176"/><line style="stroke:#181818;stroke-width:2;" x1="1879.5601" x2="1879.5601" y1="1564.0176" y2="1577.0176"/><line style="stroke:#181818;stroke-width:2;" x1="1838.5601" x2="1879.5601" y1="1577.0176" y2="1577.0176"/><polygon fill="#181818" points="1848.5601,1573.0176,1838.5601,1577.0176,1848.5601,1581.0176,1844.5601,1577.0176" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="1844.5601" y="1558.7549">36</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165.5024" x="1863.02" y="1558.7549">Ignore old cancellation event</text></g><path d="M1842,1590.0176 L1842,1634.0176 L2007,1634.0176 L2007,1600.0176 L1997,1590.0176 L1842,1590.0176" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1997,1590.0176 L1997,1600.0176 L2007,1600.0176 L1997,1590.0176" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144.498" x="1848" y="1609.0459">Prevents overwriting with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92.5171" x="1848" y="1626.3369">outdated events</text><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="1405.9058" x2="2303.0044" y1="1640.5996" y2="1640.5996"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="280.1401" x="1410.9058" y="1652.4697">[Summary doesn't exist or status allows cancellation]</text><g class="message" data-participant-1="EventHandler" data-participant-2="WriteRepo"><polygon fill="#181818" points="1511.6675,1675.5215,1501.6675,1679.5215,1511.6675,1683.5215,1507.6675,1679.5215" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="1505.6675" x2="1826.5601" y1="1679.5215" y2="1679.5215"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="1585.8721" y="1674.2588">37</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138.0234" x="1604.332" y="1674.2588">findById(appointmentId)</text></g><g class="message" data-participant-1="WriteRepo" data-participant-2="EventHandler"><polygon fill="#181818" points="1815.5601,1706.8125,1825.5601,1710.8125,1815.5601,1714.8125,1819.5601,1710.8125" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2,2;" x1="1495.6675" x2="1821.5601" y1="1710.8125" y2="1710.8125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="1584.0862" y="1705.5498">38</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136.5952" x="1602.5461" y="1705.5498">Optional&lt;Appointment&gt;</text></g><path d="M1733.8433,1725.8125 L1794.0142,1725.8125 L1794.0142,1735.1035 L1784.0142,1745.1035 L1733.8433,1745.1035 L1733.8433,1725.8125" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="259.959" style="stroke:#000000;stroke-width:1.5;" width="559.1611" x="1733.8433" y="1725.8125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="15.1709" x="1748.8433" y="1740.8408">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="185.7539" x="1809.0142" y="1739.6826">[Appointment found in write model]</text><g class="message" data-participant-1="EventHandler" data-participant-2="EventHandler"><line style="stroke:#181818;stroke-width:2;" x1="1837.5601" x2="1879.5601" y1="1768.3945" y2="1768.3945"/><line style="stroke:#181818;stroke-width:2;" x1="1879.5601" x2="1879.5601" y1="1768.3945" y2="1781.3945"/><line style="stroke:#181818;stroke-width:2;" x1="1838.5601" x2="1879.5601" y1="1781.3945" y2="1781.3945"/><polygon fill="#181818" points="1848.5601,1777.3945,1838.5601,1781.3945,1848.5601,1785.3945,1844.5601,1781.3945" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="1844.5601" y="1763.1318">39</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="177.7598" x="1863.02" y="1763.1318">Preserve all appointment fields</text></g><g class="message" data-participant-1="EventHandler" data-participant-2="ReadRepo"><polygon fill="#181818" points="2167.1807,1808.6855,2177.1807,1812.6855,2167.1807,1816.6855,2171.1807,1812.6855" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="1837.5601" x2="2173.1807" y1="1812.6855" y2="1812.6855"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="1847.0601" y="1807.4229">40</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="304.1606" x="1865.52" y="1807.4229">save(AppointmentSummary with status CANCELED)</text></g><g class="message" data-participant-1="ReadRepo" data-participant-2="EventHandler"><polygon fill="#181818" points="1848.5601,1839.9766,1838.5601,1843.9766,1848.5601,1847.9766,1844.5601,1843.9766" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2,2;" x1="1842.5601" x2="2183.1807" y1="1843.9766" y2="1843.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="1983.21" y="1838.7139">41</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36.8608" x="2001.6699" y="1838.7139">Saved</text></g><path d="M1842,1856.9766 L1842,1900.9766 L2048,1900.9766 L2048,1866.9766 L2038,1856.9766 L1842,1856.9766" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M2038,1856.9766 L2038,1866.9766 L2048,1866.9766 L2038,1856.9766" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138.709" x="1848" y="1876.0049">Preserves all fields from</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185.707" x="1848" y="1893.2959">write model, only updates status</text><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="1733.8433" x2="2293.0044" y1="1907.5586" y2="1907.5586"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="128.9009" x="1738.8433" y="1919.4287">[Appointment not found]</text><g class="message" data-participant-1="EventHandler" data-participant-2="ReadRepo"><polygon fill="#181818" points="2167.1807,1942.4805,2177.1807,1946.4805,2167.1807,1950.4805,2171.1807,1946.4805" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="1837.5601" x2="2173.1807" y1="1946.4805" y2="1946.4805"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="1884.2637" y="1941.2178">42</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="229.7534" x="1902.7236" y="1941.2178">save(AppointmentSummary from event)</text></g><g class="message" data-participant-1="ReadRepo" data-participant-2="EventHandler"><polygon fill="#181818" points="1848.5601,1973.7715,1838.5601,1977.7715,1848.5601,1981.7715,1844.5601,1977.7715" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2,2;" x1="1842.5601" x2="2183.1807" y1="1977.7715" y2="1977.7715"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="1983.21" y="1972.5088">43</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36.8608" x="2001.6699" y="1972.5088">Saved</text></g><g class="message" data-participant-1="EventHandler" data-participant-2="EventHandler"><line style="stroke:#181818;stroke-width:2;" x1="1837.5601" x2="1879.5601" y1="2028.0625" y2="2028.0625"/><line style="stroke:#181818;stroke-width:2;" x1="1879.5601" x2="1879.5601" y1="2028.0625" y2="2041.0625"/><line style="stroke:#181818;stroke-width:2;" x1="1832.5601" x2="1879.5601" y1="2041.0625" y2="2041.0625"/><polygon fill="#181818" points="1842.5601,2037.0625,1832.5601,2041.0625,1842.5601,2045.0625,1838.5601,2041.0625" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="1844.5601" y="2022.7998">44</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="171.9897" x="1863.02" y="2022.7998">Update MongoDB read model</text></g><path d="M243,2056.0625 L243,2152.0625 L595,2152.0625 L595,2066.0625 L585,2056.0625 L243,2056.0625" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M585,2056.0625 L585,2066.0625 L595,2066.0625 L585,2056.0625" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="310.0005" x="249" y="2075.0908">Este diagrama mostra a atualiza&#231;&#227;o de uma consulta.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="309.3403" x="249" y="2092.3818">Dependendo do status, publica evento de atualiza&#231;&#227;o</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="331.6904" x="249" y="2109.6729">ou cancelamento. Se atualizado, tamb&#233;m envia lembrete.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="309.9941" x="249" y="2126.9639">O handler atualiza o read model (MongoDB) de forma</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="193.6479" x="249" y="2144.2549">ass&#237;ncrona atrav&#233;s do RabbitMQ.</text><!--SRC=[rLZTJYit4BxVfnYb5ysH0kU8IrGXvP1KeCA1Gq2zuSPPEud5hftQta1QzMbwKPsBFWKlrl7FRkpi1bAeAdL14F_CvvblnZEpqGzSB8aY9Kn9_Z1NiXBqL1PImNS_kYVJpGxDVgcOoDabqvhCsR3WSm4v4uQfZbr3fUJZxOBd3mBtmr6M6MuA1iFbKd9XIfI3koKbXi41J88GZ3YP8qgMaToW4gS5ntqP8XkUyoL1cLu4S2g5KR8ecEe1qR0PlY1HbaJG2LChdhCW5K_jb8n5ElUEdv08GOgmw5Lts-kLLwovOKkfEPgzlXVzdnL7PYubPGNoStRqmI6vMRil1RaXqoatbr_lnVWfNn0nzshMqpjF7A_mpnaQNpCOJ-oK-benjKwKlM64DhfUIZ6NeyzUORlIrZSnkkI2CXLhiJM7mL0PAQfoYfynBlZA1aqWq_-3WvF8-yTmVNSB7ydc5FtnDqv_Hqrzn2NdO-Hfyo42taHHjldiJuWZvHYgRR1-TEGv7G0rCW5E0YrBn_Q0jo8ta15M4oh7C4CsFw_FQGeIoM_2gla41x4-Lql39KRm3v5A9nbb7GXPbptNYc40C8WK0BIGn9lJMzB1mRcuORbKL6-J4Gr721ePjdNpqc5geeyC2drCE-mfPyvYm1Gd5KEk8bktG3iD3fajjdV6MK7r3XTficAnMV_4EN56xNlMKeMxdDCHpX5EBDq45oaCJ0mnbGQEQNFuvNHyCHvbW4yxbBV1bzMqu7eHfsA22RzWrEMSrFPko3gT7KCknOefCxJBWlPxaV1X7c1x0s2h1gsnfic9ThOUTDBXzVCWjVgCEhc8dGQF5Pf5z7ovkdq_HI4c_sM6GeYycw0Gu_iIz6OMwdBGec40lRlhqV1sFEgzZn4LJdWt9RMg-qUDeEr2i5NCTjpBTZdPr2gB4DBeqQTFSFNJlTY9qbIxU3QaDY5neFXyOK3EOXw6UYtoXP92OhWlbSonn-DYVenBpaqQRBf7pdLLObAThc7XYxcs9eF5zGd5xRONfYD2j_W-ITgJX9VuehpWkqqAZ_iSkn9FkBW9VSlkufcUKhSvJkCmS6v8LUwgevCA_QZM9wqOgJ5VKT2LZi0Oj77VgEa4KUbEbReqIkL3SWZD82ZR8PQsGynQNjrgznB79dT_MvsM5oD5qmxI6vlCTPwiCJYR8ql2YtwK3_O1k91pgBC9gceGGllIq1deTR7QFzAJghaphRJyrgQZcyN_nsLmdOZVYRqQrpRTO5RHJVMTd9wDHtTOUi6-H5vTNb-CRqCTVZrqprtF1xAWuFrJ4DSBiePo-wIfiHMA_i6-rsT3YRNd4Timp97moCqYsYChu- -ktzgiD7dI3Lnt4KocacdnlV6cMmk3uQGevADEbDvfyXwl1xLeHnzPBwKTwUlkFMaakzlJvaXqSDpMpkpt4i05FBhNOfz887fUzYYwGMEPP9QXhfxy9QIjHDkELUVFsWLro_SXmUo-6lMpLnRkuAqJRA-m3A7fE75X4uY0cPBbrhw8yG58KQp3YvaE9YVRavXjuZRs9AvwRxwJTAjftApznrIpO43z_wt5yAMAvdh3r9zHjuPdQboY_WipWdZQA0BuOofIy5_9yv_FVqW4XmfNNITM67A8SYEsH6ZynLKPl3ZmlMfEFATEBW7ARA8AgOLOHyX3V3Dizb0v04FAwVCtz8fOSG85AwUA6MPFlAgxlsO_o8W5wDVV6TbZPrAL18M8riz_YHnxJ6kJ8gldRzegN1Uvmqqd-JS0]--></g></svg>