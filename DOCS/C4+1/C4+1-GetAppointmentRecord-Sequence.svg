<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="2040.625px" preserveAspectRatio="none" style="width:2443px;height:2040px;background:#FFFFFF;" version="1.1" viewBox="0 0 2443 2040" width="2443.75px" zoomAndPan="magnify"><title>C4: Sequence Diagram - Get Appointment Record</title><defs/><g><text fill="#000000" font-family="Arial" font-size="21.875" font-weight="bold" lengthAdjust="spacing" textLength="516.5726" x="973.6351" y="43.2404">C4: Sequence Diagram - Get Appointment Record</text><rect fill="#FFFFFF" height="81.3232" style="stroke:#181818;stroke-width:1.5625;" width="15.625" x="425.6729" y="298.2056"/><rect fill="#FFFFFF" height="215.4785" style="stroke:#181818;stroke-width:1.5625;" width="15.625" x="839.2899" y="253.6377"/><rect fill="#FFFFFF" height="304.9805" style="stroke:#181818;stroke-width:1.5625;" width="15.625" x="1309.8961" y="634.0698"/><rect fill="#FFFFFF" height="44.5679" style="stroke:#181818;stroke-width:1.5625;" width="15.625" x="1682.0946" y="701.3306"/><rect fill="#FFFFFF" height="44.5679" style="stroke:#181818;stroke-width:1.5625;" width="15.625" x="1894.0872" y="813.1592"/><rect fill="#FFFFFF" height="81.3232" style="stroke:#181818;stroke-width:1.5625;" width="15.625" x="2182.6797" y="1258.1787"/><rect fill="none" height="204.541" style="stroke:#000000;stroke-width:2.34375;" width="955.2483" x="62.5" y="321.6431"/><rect fill="none" height="816.1621" style="stroke:#000000;stroke-width:2.34375;" width="2402.9053" x="31.25" y="1073.9502"/><rect fill="none" height="455.957" style="stroke:#000000;stroke-width:2.34375;" width="2371.6553" x="46.875" y="1177.6001"/><rect fill="none" height="296.4355" style="stroke:#000000;stroke-width:2.34375;" width="2340.4053" x="62.5" y="1281.6162"/><rect fill="none" height="159.6069" style="stroke:#000000;stroke-width:2.34375;" width="1710.8238" x="676.4565" y="1407.5073"/><line style="stroke:#181818;stroke-width:0.78125;stroke-dasharray:5.0,5.0;" x1="109.375" x2="109.375" y1="183.252" y2="1916.6748"/><line style="stroke:#181818;stroke-width:0.78125;stroke-dasharray:5.0,5.0;" x1="432.7583" x2="432.7583" y1="183.252" y2="1916.6748"/><line style="stroke:#181818;stroke-width:0.78125;stroke-dasharray:5.0,5.0;" x1="846.769" x2="846.769" y1="183.252" y2="1916.6748"/><line style="stroke:#181818;stroke-width:0.78125;stroke-dasharray:5.0,5.0;" x1="1317.3805" x2="1317.3805" y1="183.252" y2="1916.6748"/><line style="stroke:#181818;stroke-width:0.78125;stroke-dasharray:5.0,5.0;" x1="1688.4689" x2="1688.4689" y1="183.252" y2="1916.6748"/><line style="stroke:#181818;stroke-width:0.78125;stroke-dasharray:5.0,5.0;" x1="1900.7202" x2="1900.7202" y1="183.252" y2="1916.6748"/><line style="stroke:#181818;stroke-width:0.78125;stroke-dasharray:5.0,5.0;" x1="2189.0167" x2="2189.0167" y1="183.252" y2="1916.6748"/><text fill="#000000" font-family="Arial" font-size="21.875" lengthAdjust="spacing" textLength="55.9265" x="78.125" y="178.6163">Client</text><ellipse cx="110.7758" cy="78.3447" fill="#E2E2F0" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.78125;"/><path d="M110.7758,90.8447 L110.7758,133.0322 M90.4633,103.3447 L131.0883,103.3447 M110.7758,133.0322 L90.4633,156.4697 M110.7758,133.0322 L131.0883,156.4697 " fill="none" style="stroke:#181818;stroke-width:0.78125;"/><text fill="#000000" font-family="Arial" font-size="21.875" lengthAdjust="spacing" textLength="55.9265" x="78.125" y="1934.9152">Client</text><ellipse cx="110.7758" cy="1952.832" fill="#E2E2F0" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.78125;"/><path d="M110.7758,1965.332 L110.7758,2007.5195 M90.4633,1977.832 L131.0883,1977.832 M110.7758,2007.5195 L90.4633,2030.957 M110.7758,2007.5195 L131.0883,2030.957 " fill="none" style="stroke:#181818;stroke-width:0.78125;"/><rect fill="#E2E2F0" height="46.3135" rx="3.9063" ry="3.9063" style="stroke:#181818;stroke-width:0.78125;" width="170.2042" x="348.3833" y="135.376"/><text fill="#000000" font-family="Arial" font-size="21.875" lengthAdjust="spacing" textLength="148.3292" x="359.3208" y="166.1163">Spring Security</text><rect fill="#E2E2F0" height="46.3135" rx="3.9063" ry="3.9063" style="stroke:#181818;stroke-width:0.78125;" width="170.2042" x="348.3833" y="1915.1123"/><text fill="#000000" font-family="Arial" font-size="21.875" lengthAdjust="spacing" textLength="148.3292" x="359.3208" y="1945.8527">Spring Security</text><rect fill="#E2E2F0" height="46.3135" rx="3.9063" ry="3.9063" style="stroke:#181818;stroke-width:0.78125;" width="310.0418" x="692.0815" y="135.376"/><text fill="#000000" font-family="Arial" font-size="21.875" lengthAdjust="spacing" textLength="288.1668" x="703.019" y="166.1163">AppointmentRecordController</text><rect fill="#E2E2F0" height="46.3135" rx="3.9063" ry="3.9063" style="stroke:#181818;stroke-width:0.78125;" width="310.0418" x="692.0815" y="1915.1123"/><text fill="#000000" font-family="Arial" font-size="21.875" lengthAdjust="spacing" textLength="288.1668" x="703.019" y="1945.8527">AppointmentRecordController</text><rect fill="#E2E2F0" height="46.3135" rx="3.9063" ry="3.9063" style="stroke:#181818;stroke-width:0.78125;" width="288.1561" x="1173.6305" y="135.376"/><text fill="#000000" font-family="Arial" font-size="21.875" lengthAdjust="spacing" textLength="266.2811" x="1184.568" y="166.1163">AppointmentRecordService</text><rect fill="#E2E2F0" height="46.3135" rx="3.9063" ry="3.9063" style="stroke:#181818;stroke-width:0.78125;" width="288.1561" x="1173.6305" y="1915.1123"/><text fill="#000000" font-family="Arial" font-size="21.875" lengthAdjust="spacing" textLength="266.2811" x="1184.568" y="1945.8527">AppointmentRecordService</text><rect fill="#ADD8E6" height="46.3135" rx="3.9063" ry="3.9063" style="stroke:#181818;stroke-width:0.78125;" width="209.1263" x="1585.3439" y="135.376"/><text fill="#000000" font-family="Arial" font-size="21.875" lengthAdjust="spacing" textLength="187.2513" x="1596.2814" y="166.1163">hap-physicians API</text><rect fill="#ADD8E6" height="46.3135" rx="3.9063" ry="3.9063" style="stroke:#181818;stroke-width:0.78125;" width="209.1263" x="1585.3439" y="1915.1123"/><text fill="#000000" font-family="Arial" font-size="21.875" lengthAdjust="spacing" textLength="187.2513" x="1596.2814" y="1945.8527">hap-physicians API</text><rect fill="#ADD8E6" height="46.3135" rx="3.9063" ry="3.9063" style="stroke:#181818;stroke-width:0.78125;" width="183.609" x="1810.0952" y="135.376"/><text fill="#000000" font-family="Arial" font-size="21.875" lengthAdjust="spacing" textLength="161.734" x="1821.0327" y="166.1163">hap-patients API</text><rect fill="#ADD8E6" height="46.3135" rx="3.9063" ry="3.9063" style="stroke:#181818;stroke-width:0.78125;" width="183.609" x="1810.0952" y="1915.1123"/><text fill="#000000" font-family="Arial" font-size="21.875" lengthAdjust="spacing" textLength="161.734" x="1821.0327" y="1945.8527">hap-patients API</text><rect fill="#D3D3D3" height="46.3135" rx="3.9063" ry="3.9063" style="stroke:#181818;stroke-width:0.78125;" width="362.326" x="2009.3292" y="135.376"/><text fill="#000000" font-family="Arial" font-size="21.875" lengthAdjust="spacing" textLength="340.451" x="2020.2667" y="166.1163">Peer AppointmentRecordController</text><rect fill="#D3D3D3" height="46.3135" rx="3.9063" ry="3.9063" style="stroke:#181818;stroke-width:0.78125;" width="362.326" x="2009.3292" y="1915.1123"/><text fill="#000000" font-family="Arial" font-size="21.875" lengthAdjust="spacing" textLength="340.451" x="2020.2667" y="1945.8527">Peer AppointmentRecordController</text><rect fill="#FFFFFF" height="81.3232" style="stroke:#181818;stroke-width:1.5625;" width="15.625" x="425.6729" y="298.2056"/><rect fill="#FFFFFF" height="215.4785" style="stroke:#181818;stroke-width:1.5625;" width="15.625" x="839.2899" y="253.6377"/><rect fill="#FFFFFF" height="304.9805" style="stroke:#181818;stroke-width:1.5625;" width="15.625" x="1309.8961" y="634.0698"/><rect fill="#FFFFFF" height="44.5679" style="stroke:#181818;stroke-width:1.5625;" width="15.625" x="1682.0946" y="701.3306"/><rect fill="#FFFFFF" height="44.5679" style="stroke:#181818;stroke-width:1.5625;" width="15.625" x="1894.0872" y="813.1592"/><rect fill="#FFFFFF" height="81.3232" style="stroke:#181818;stroke-width:1.5625;" width="15.625" x="2182.6797" y="1258.1787"/><polygon fill="#181818" points="820.5399,247.3877,836.1649,253.6377,820.5399,259.8877,826.7899,253.6377" style="stroke:#181818;stroke-width:1.5625;"/><line style="stroke:#181818;stroke-width:1.5625;" x1="110.7758" x2="829.9149" y1="253.6377" y2="253.6377"/><text fill="#000000" font-family="Arial" font-size="20.3125" font-weight="bold" lengthAdjust="spacing" textLength="11.2968" x="121.7133" y="234.8618">1</text><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="365.8134" x="139.2601" y="223.5153">GET /api/appointment-records/{recordId}</text><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="339.7781" x="139.2601" y="246.2082">Authorization, X-User-Id, X-User-Role</text><polygon fill="#181818" points="458.4854,291.9556,442.8604,298.2056,458.4854,304.4556,452.2354,298.2056" style="stroke:#181818;stroke-width:1.5625;"/><line style="stroke:#181818;stroke-width:1.5625;" x1="449.1104" x2="837.7274" y1="298.2056" y2="298.2056"/><text fill="#000000" font-family="Arial" font-size="20.3125" font-weight="bold" lengthAdjust="spacing" textLength="11.2968" x="467.8604" y="290.7761">2</text><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="350.7576" x="485.4073" y="290.7761">hasAnyAuthority('ADMIN','PATIENT') ?</text><path d="M62.5,321.6431 L156.517,321.6431 L156.517,331.8359 L140.892,347.4609 L62.5,347.4609 L62.5,321.6431 " fill="#EEEEEE" style="stroke:#000000;stroke-width:2.34375;"/><rect fill="none" height="204.541" style="stroke:#000000;stroke-width:2.34375;" width="955.2483" x="62.5" y="321.6431"/><text fill="#000000" font-family="Arial" font-size="20.3125" font-weight="bold" lengthAdjust="spacing" textLength="23.7045" x="85.9375" y="341.5939">alt</text><text fill="#000000" font-family="Arial" font-size="17.1875" font-weight="bold" lengthAdjust="spacing" textLength="101.1948" x="179.9545" y="340.3275">[Authorized]</text><polygon fill="#181818" points="820.5399,373.2788,836.1649,379.5288,820.5399,385.7788,826.7899,379.5288" style="stroke:#181818;stroke-width:1.5625;"/><line style="stroke:#181818;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="433.4854" x2="829.9149" y1="379.5288" y2="379.5288"/><text fill="#000000" font-family="Arial" font-size="20.3125" font-weight="bold" lengthAdjust="spacing" textLength="11.2968" x="444.4229" y="372.0993">3</text><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="46.2883" x="461.9698" y="372.0993">allow</text><line style="stroke:#000000;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="62.5" x2="1017.7483" y1="393.5913" y2="393.5913"/><text fill="#000000" font-family="Arial" font-size="17.1875" font-weight="bold" lengthAdjust="spacing" textLength="131.7513" x="70.3125" y="409.1507">[Not authorized]</text><polygon fill="#181818" points="127.9633,462.8662,112.3383,469.1162,127.9633,475.3662,121.7133,469.1162" style="stroke:#181818;stroke-width:1.5625;"/><line style="stroke:#181818;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="118.5883" x2="431.9229" y1="469.1162" y2="469.1162"/><text fill="#000000" font-family="Arial" font-size="20.3125" font-weight="bold" lengthAdjust="spacing" textLength="11.2968" x="137.3383" y="450.3403">4</text><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="267.6628" x="154.8851" y="438.9938">403 Forbidden + {"error": "..."}</text><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="151.2627" x="154.8851" y="461.6867">(Spring Security)</text><polygon fill="#181818" points="414.7354,507.4341,430.3604,513.6841,414.7354,519.9341,420.9854,513.6841" style="stroke:#181818;stroke-width:1.5625;"/><line style="stroke:#181818;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="110.7758" x2="424.1104" y1="513.6841" y2="513.6841"/><text fill="#000000" font-family="Arial" font-size="20.3125" font-weight="bold" lengthAdjust="spacing" textLength="11.2968" x="121.7133" y="506.2546">5</text><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="5.6435" x="139.2601" y="506.2546">&#160;</text><line style="stroke:#181818;stroke-width:1.5625;" x1="847.1024" x2="912.7274" y1="569.1895" y2="569.1895"/><line style="stroke:#181818;stroke-width:1.5625;" x1="912.7274" x2="912.7274" y1="569.1895" y2="589.502"/><line style="stroke:#181818;stroke-width:1.5625;" x1="848.6649" x2="912.7274" y1="589.502" y2="589.502"/><polygon fill="#181818" points="864.2899,583.252,848.6649,589.502,864.2899,595.752,858.0399,589.502" style="stroke:#181818;stroke-width:1.5625;"/><text fill="#000000" font-family="Arial" font-size="20.3125" font-weight="bold" lengthAdjust="spacing" textLength="11.2968" x="858.0399" y="561.7599">6</text><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="431.1844" x="875.5867" y="561.7599">build UserDTO(id=X-User-Id, role=X-User-Role)</text><polygon fill="#181818" points="1291.1461,627.8198,1306.7711,634.0698,1291.1461,640.3198,1297.3961,634.0698" style="stroke:#181818;stroke-width:1.5625;"/><line style="stroke:#181818;stroke-width:1.5625;" x1="847.1024" x2="1300.5211" y1="634.0698" y2="634.0698"/><text fill="#000000" font-family="Arial" font-size="20.3125" font-weight="bold" lengthAdjust="spacing" textLength="11.2968" x="858.0399" y="626.6403">7</text><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="413.2027" x="875.5867" y="626.6403">getAppointmentRecord(recordId, currentUser)</text><polygon fill="#181818" points="1663.3446,695.0806,1678.9696,701.3306,1663.3446,707.5806,1669.5946,701.3306" style="stroke:#181818;stroke-width:1.5625;"/><line style="stroke:#181818;stroke-width:1.5625;" x1="1325.5211" x2="1672.7196" y1="701.3306" y2="701.3306"/><text fill="#000000" font-family="Arial" font-size="20.3125" font-weight="bold" lengthAdjust="spacing" textLength="11.2968" x="1336.4586" y="682.5546">8</text><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="309.3391" x="1354.0054" y="671.2082">(ex) GET /physicians/{physicianId}</text><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="233.7029" x="1354.0054" y="693.9011">(validar acesso/metadata)</text><polygon fill="#181818" points="1342.7086,739.6484,1327.0836,745.8984,1342.7086,752.1484,1336.4586,745.8984" style="stroke:#181818;stroke-width:1.5625;"/><line style="stroke:#181818;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="1333.3336" x2="1688.3446" y1="745.8984" y2="745.8984"/><text fill="#000000" font-family="Arial" font-size="20.3125" font-weight="bold" lengthAdjust="spacing" textLength="11.2968" x="1352.0836" y="738.4689">9</text><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="170.5238" x="1369.6304" y="738.4689">200 OK / 404 / 403</text><polygon fill="#181818" points="1875.3372,806.9092,1890.9622,813.1592,1875.3372,819.4092,1881.5872,813.1592" style="stroke:#181818;stroke-width:1.5625;"/><line style="stroke:#181818;stroke-width:1.5625;" x1="1325.5211" x2="1884.7122" y1="813.1592" y2="813.1592"/><text fill="#000000" font-family="Arial" font-size="20.3125" font-weight="bold" lengthAdjust="spacing" textLength="22.5937" x="1336.4586" y="794.3832">10</text><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="261.9499" x="1365.3023" y="783.0368">(ex) GET /patients/{patientId}</text><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="248.3818" x="1365.3023" y="805.7297">(validar ownership/consent)</text><polygon fill="#181818" points="1342.7086,851.4771,1327.0836,857.7271,1342.7086,863.9771,1336.4586,857.7271" style="stroke:#181818;stroke-width:1.5625;"/><line style="stroke:#181818;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="1333.3336" x2="1900.3372" y1="857.7271" y2="857.7271"/><text fill="#000000" font-family="Arial" font-size="20.3125" font-weight="bold" lengthAdjust="spacing" textLength="22.5937" x="1352.0836" y="850.2975">11</text><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="170.5238" x="1380.9273" y="850.2975">200 OK / 404 / 403</text><polygon fill="#181818" points="864.2899,932.8003,848.6649,939.0503,864.2899,945.3003,858.0399,939.0503" style="stroke:#181818;stroke-width:1.5625;"/><line style="stroke:#181818;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="854.9149" x2="1316.1461" y1="939.0503" y2="939.0503"/><text fill="#000000" font-family="Arial" font-size="20.3125" font-weight="bold" lengthAdjust="spacing" textLength="22.5937" x="873.6649" y="931.6208">12</text><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="266.433" x="902.5085" y="931.6208">AppointmentRecordViewDTO</text><polygon fill="#181818" points="127.9633,977.3682,112.3383,983.6182,127.9633,989.8682,121.7133,983.6182" style="stroke:#181818;stroke-width:1.5625;"/><line style="stroke:#181818;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="118.5883" x2="845.5399" y1="983.6182" y2="983.6182"/><text fill="#000000" font-family="Arial" font-size="20.3125" font-weight="bold" lengthAdjust="spacing" textLength="22.5937" x="137.3383" y="976.1887">13</text><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="358.4641" x="166.1819" y="976.1887">200 OK + AppointmentRecordViewDTO</text><polygon fill="#181818" points="864.2899,1044.2627,848.6649,1050.5127,864.2899,1056.7627,858.0399,1050.5127" style="stroke:#181818;stroke-width:1.5625;"/><line style="stroke:#181818;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="854.9149" x2="1316.1461" y1="1050.5127" y2="1050.5127"/><text fill="#000000" font-family="Arial" font-size="20.3125" font-weight="bold" lengthAdjust="spacing" textLength="22.5937" x="873.6649" y="1043.0832">14</text><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="285.6247" x="902.5085" y="1043.0832">throw NotFoundException(msg)</text><path d="M31.25,1073.9502 L125.267,1073.9502 L125.267,1084.1431 L109.642,1099.7681 L31.25,1099.7681 L31.25,1073.9502 " fill="#EEEEEE" style="stroke:#000000;stroke-width:2.34375;"/><rect fill="none" height="816.1621" style="stroke:#000000;stroke-width:2.34375;" width="2402.9053" x="31.25" y="1073.9502"/><text fill="#000000" font-family="Arial" font-size="20.3125" font-weight="bold" lengthAdjust="spacing" textLength="23.7045" x="54.6875" y="1093.9011">alt</text><text fill="#000000" font-family="Arial" font-size="17.1875" font-weight="bold" lengthAdjust="spacing" textLength="263.662" x="148.7045" y="1092.6346">[Request tem "X-Peer-Request"]</text><polygon fill="#181818" points="127.9633,1125.5859,112.3383,1131.8359,127.9633,1138.0859,121.7133,1131.8359" style="stroke:#181818;stroke-width:1.5625;"/><line style="stroke:#181818;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="118.5883" x2="845.5399" y1="1131.8359" y2="1131.8359"/><text fill="#000000" font-family="Arial" font-size="20.3125" font-weight="bold" lengthAdjust="spacing" textLength="22.5937" x="137.3383" y="1124.4064">15</text><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="278.067" x="166.1819" y="1124.4064">404 Not Found + {"error": msg}</text><line style="stroke:#000000;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="31.25" x2="2434.1553" y1="1145.8984" y2="1145.8984"/><text fill="#000000" font-family="Arial" font-size="17.1875" font-weight="bold" lengthAdjust="spacing" textLength="320.52" x="39.0625" y="1161.4578">[Sem "X-Peer-Request" -&gt; tentar peers]</text><path d="M46.875,1177.6001 L160.054,1177.6001 L160.054,1187.793 L144.429,1203.418 L46.875,1203.418 L46.875,1177.6001 " fill="#EEEEEE" style="stroke:#000000;stroke-width:2.34375;"/><rect fill="none" height="455.957" style="stroke:#000000;stroke-width:2.34375;" width="2371.6553" x="46.875" y="1177.6001"/><text fill="#000000" font-family="Arial" font-size="20.3125" font-weight="bold" lengthAdjust="spacing" textLength="42.8665" x="70.3125" y="1197.551">loop</text><text fill="#000000" font-family="Arial" font-size="17.1875" font-weight="bold" lengthAdjust="spacing" textLength="456.6185" x="183.4915" y="1196.2845">[para cada peer em ExternalServiceClient.getPeerUrls()]</text><polygon fill="#181818" points="2163.9297,1251.9287,2179.5547,1258.1787,2163.9297,1264.4287,2170.1797,1258.1787" style="stroke:#181818;stroke-width:1.5625;"/><line style="stroke:#181818;stroke-width:1.5625;" x1="847.1024" x2="2173.3047" y1="1258.1787" y2="1258.1787"/><text fill="#000000" font-family="Arial" font-size="20.3125" font-weight="bold" lengthAdjust="spacing" textLength="22.5937" x="858.0399" y="1239.4028">16</text><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="424.4896" x="886.8835" y="1228.0563">HTTP GET /api/appointment-records/{recordId}</text><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="594.3489" x="886.8835" y="1250.7492">(fwd Authorization, X-User-Id, X-User-Role, X-Peer-Request=true)</text><path d="M62.5,1281.6162 L156.517,1281.6162 L156.517,1291.8091 L140.892,1307.4341 L62.5,1307.4341 L62.5,1281.6162 " fill="#EEEEEE" style="stroke:#000000;stroke-width:2.34375;"/><rect fill="none" height="296.4355" style="stroke:#000000;stroke-width:2.34375;" width="2340.4053" x="62.5" y="1281.6162"/><text fill="#000000" font-family="Arial" font-size="20.3125" font-weight="bold" lengthAdjust="spacing" textLength="23.7045" x="85.9375" y="1301.5671">alt</text><text fill="#000000" font-family="Arial" font-size="17.1875" font-weight="bold" lengthAdjust="spacing" textLength="161.4098" x="179.9545" y="1300.3006">[Peer tem o registo]</text><polygon fill="#181818" points="864.2899,1333.252,848.6649,1339.502,864.2899,1345.752,858.0399,1339.502" style="stroke:#181818;stroke-width:1.5625;"/><line style="stroke:#181818;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="854.9149" x2="2188.9297" y1="1339.502" y2="1339.502"/><text fill="#000000" font-family="Arial" font-size="20.3125" font-weight="bold" lengthAdjust="spacing" textLength="22.5937" x="873.6649" y="1332.0724">17</text><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="358.4641" x="902.5085" y="1332.0724">200 OK + AppointmentRecordViewDTO</text><polygon fill="#181818" points="127.9633,1377.8198,112.3383,1384.0698,127.9633,1390.3198,121.7133,1384.0698" style="stroke:#181818;stroke-width:1.5625;"/><line style="stroke:#181818;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="118.5883" x2="845.5399" y1="1384.0698" y2="1384.0698"/><text fill="#000000" font-family="Arial" font-size="20.3125" font-weight="bold" lengthAdjust="spacing" textLength="22.5937" x="137.3383" y="1376.6403">18</text><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="358.4641" x="166.1819" y="1376.6403">200 OK + AppointmentRecordViewDTO</text><path d="M676.4565,1407.5073 L800.972,1407.5073 L800.972,1417.7002 L785.347,1433.3252 L676.4565,1433.3252 L676.4565,1407.5073 " fill="#EEEEEE" style="stroke:#000000;stroke-width:2.34375;"/><rect fill="none" height="159.6069" style="stroke:#000000;stroke-width:2.34375;" width="1710.8238" x="676.4565" y="1407.5073"/><text fill="#000000" font-family="Arial" font-size="20.3125" font-weight="bold" lengthAdjust="spacing" textLength="54.203" x="699.894" y="1427.4582">break</text><line style="stroke:#000000;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="676.4565" x2="2387.2803" y1="1434.8877" y2="1434.8877"/><text fill="#000000" font-family="Arial" font-size="17.1875" font-weight="bold" lengthAdjust="spacing" textLength="164.3051" x="684.269" y="1450.4471">[Peer responde 404]</text><polygon fill="#181818" points="864.2899,1481.4697,848.6649,1487.7197,864.2899,1493.9697,858.0399,1487.7197" style="stroke:#181818;stroke-width:1.5625;"/><line style="stroke:#181818;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="854.9149" x2="2188.9297" y1="1487.7197" y2="1487.7197"/><text fill="#000000" font-family="Arial" font-size="20.3125" font-weight="bold" lengthAdjust="spacing" textLength="22.5937" x="873.6649" y="1480.2902">19</text><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="134.3819" x="902.5085" y="1480.2902">404 Not Found</text><line style="stroke:#000000;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="676.4565" x2="2387.2803" y1="1501.7822" y2="1501.7822"/><text fill="#000000" font-family="Arial" font-size="17.1875" font-weight="bold" lengthAdjust="spacing" textLength="198.6633" x="684.269" y="1517.3416">[Peer erro (timeout/5xx)]</text><polygon fill="#181818" points="864.2899,1548.3643,848.6649,1554.6143,864.2899,1560.8643,858.0399,1554.6143" style="stroke:#181818;stroke-width:1.5625;"/><line style="stroke:#181818;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="854.9149" x2="2188.9297" y1="1554.6143" y2="1554.6143"/><text fill="#000000" font-family="Arial" font-size="20.3125" font-weight="bold" lengthAdjust="spacing" textLength="22.5937" x="873.6649" y="1547.1848">20</text><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="129.8195" x="902.5085" y="1547.1848">error (ignored)</text><polygon fill="#181818" points="127.9633,1614.8071,112.3383,1621.0571,127.9633,1627.3071,121.7133,1621.0571" style="stroke:#181818;stroke-width:1.5625;"/><line style="stroke:#181818;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="118.5883" x2="845.5399" y1="1621.0571" y2="1621.0571"/><text fill="#000000" font-family="Arial" font-size="20.3125" font-weight="bold" lengthAdjust="spacing" textLength="22.5937" x="137.3383" y="1613.6276">21</text><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="278.067" x="166.1819" y="1613.6276">404 Not Found + {"error": msg}</text><line style="stroke:#000000;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="31.25" x2="2434.1553" y1="1646.0571" y2="1646.0571"/><text fill="#000000" font-family="Arial" font-size="17.1875" font-weight="bold" lengthAdjust="spacing" textLength="203.3882" x="39.0625" y="1661.6165">[UnauthorizedException]</text><polygon fill="#181818" points="864.2899,1692.6392,848.6649,1698.8892,864.2899,1705.1392,858.0399,1698.8892" style="stroke:#181818;stroke-width:1.5625;"/><line style="stroke:#181818;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="854.9149" x2="1316.1461" y1="1698.8892" y2="1698.8892"/><text fill="#000000" font-family="Arial" font-size="20.3125" font-weight="bold" lengthAdjust="spacing" textLength="22.5937" x="873.6649" y="1691.4597">22</text><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="317.244" x="902.5085" y="1691.4597">throw UnauthorizedException(msg)</text><polygon fill="#181818" points="127.9633,1737.207,112.3383,1743.457,127.9633,1749.707,121.7133,1743.457" style="stroke:#181818;stroke-width:1.5625;"/><line style="stroke:#181818;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="118.5883" x2="845.5399" y1="1743.457" y2="1743.457"/><text fill="#000000" font-family="Arial" font-size="20.3125" font-weight="bold" lengthAdjust="spacing" textLength="22.5937" x="137.3383" y="1736.0275">23</text><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="274.6849" x="166.1819" y="1736.0275">403 Forbidden + {"error": msg}</text><line style="stroke:#000000;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="31.25" x2="2434.1553" y1="1757.5195" y2="1757.5195"/><text fill="#000000" font-family="Arial" font-size="17.1875" font-weight="bold" lengthAdjust="spacing" textLength="195.7848" x="39.0625" y="1773.0789">[Unexpected Exception]</text><polygon fill="#181818" points="864.2899,1804.1016,848.6649,1810.3516,864.2899,1816.6016,858.0399,1810.3516" style="stroke:#181818;stroke-width:1.5625;"/><line style="stroke:#181818;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="854.9149" x2="1316.1461" y1="1810.3516" y2="1810.3516"/><text fill="#000000" font-family="Arial" font-size="20.3125" font-weight="bold" lengthAdjust="spacing" textLength="22.5937" x="873.6649" y="1802.9221">24</text><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="169.3436" x="902.5085" y="1802.9221">throw Exception(e)</text><polygon fill="#181818" points="127.9633,1871.3623,112.3383,1877.6123,127.9633,1883.8623,121.7133,1877.6123" style="stroke:#181818;stroke-width:1.5625;"/><line style="stroke:#181818;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="118.5883" x2="845.5399" y1="1877.6123" y2="1877.6123"/><text fill="#000000" font-family="Arial" font-size="20.3125" font-weight="bold" lengthAdjust="spacing" textLength="22.5937" x="137.3383" y="1858.8364">25</text><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="223.5367" x="166.1819" y="1847.4899">500 Internal Server Error</text><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="477.5818" x="166.1819" y="1870.1828">+ {"error": "External service communication error: ..."}</text><!--SRC=[hLPjRkCs4FslKmnSe9QHACvsapy6ieMRE8cnQ6B4pc8BB53GqiGc8f4gIVcZmG8zHE-m1oXwWjoa9-cGaYNv8niNNGE9POepy-RD6mwRS7voy0R- -UDFk483tJILN9W4XO4x3AMAm8_P4XL6BKy_Sf4onHA8KWvlJezhAthA8ZddOW8FBDPOUtE13ooBpQKKveOb25t5MUnvXfiOANW7XlXRXY94kE1iOYs25w1u7WkDLD0uZpcjDe1fEFSeYk4XJndjQmnJPJ4CCSmKDqktPTZRs5Jpd3i-9snAnZ4gPz2zUyrWY6h6Gons3zTtJraQfDEbfWKcwFsWx_PT3wv_WUzYFfcQSPpX3XjcR5frY-xeHOi1ee8zClbrqElT5Lw8tIMHc1aficIColEQ4D27-AKIQ0FVbyp15JFeNdhd4Bopdg03LxqHj5dAwQyC72WNMRUVyeT-zFcJw6PcAXN_dLAIuX0-1lSQLT2FoiSx6QCj9v_PE9Pn6u42KRKeq9JfhbWMNipIRtOlVkxVD0-RH4c_TpDgjk37ojnMcCKacI8gHXuuHq69dCMndDDgX6jMI5g56sc0xJArXYV7R-5IgZ6F8XHm04yDL4ggHWSQHqT73ShLtn1TQplCse9D5a2XoPJmK4Hb5NxAU1m1EL5MyndHb1UWO2PFPEmsMGulHhS-Zyvgt5BbyQn6SAjqNUd2SPpBTyFxaBnFq6nfob_LzN25pGPerQitB0FvXUyMz1O6bM0nn58-PgbkprZC8oS8dKTkmfiMV4357tZ884MLSAsV_qRTbdE1Iazv2WWe52Tr4jo8ZXWDCyv0so3FN-WNkYXIUnO_fU6wh0C-BbgvMgjER3-LpqwZVWv80GjHQzbEq332nsgPMM-USncK5FrmV0otxw5DoZXn_zzwjU8wYmeCDV0QcAB52Kh-j0waJBiT4adqUWrAT-GvX_j38OjLNMup4ye4DKGoPu_uJ5YAZj8KOmbXJIAsEhQXYX7m83DX-yAbLIfnIoWVECv9b9jg7phBggCAr0TxEwZQzD82wIr2JAsCjX2PgPBpxNr-eYUjRLIqKf3J5OO79DCK9XcZV5t-03a3-SbeC876ny2Uka6nrg0jwvdPCjZ3n8LVEoi8mMUtVUiSSAaDTtYt0Z943UaYfNNjp9imK6ZdgeAGZV7v2ukdL425D41PmeMTmhe3Uns_zaSzufbHD6Hi54U5ZK918kR20o5STNJHulaKFg8ZmtgvLx7sMywy8ELTDNuwS3qQ3VOV7_x3FFeVIQnWrAbsG5RhL5WtFsrL9R4tuTh8uYLKi2jbxQFP_BDUu7hK_zu5kpoMosE5xB7uvKJaCbAeKoaYj5hyMa9hKjqBVDET45naB9T6gfx_Ml14EdbiuR321z_m16LcsgUBHUjhQ5oRWCydGhgRvZV3K-Is-cx23OffbkIIZd0cunbce3Ct0RvDFzk1xdYu5zMbuhKpQ-VU5ywjJOmltKyAZ1i8LzXmaM9eC8BNe5Lmy5KmfoJglYZclZqcYEMUXVD9hDsSohl1QXJHR4eoGTS06oYNGmVS_Mh7C226_mK0]--></g></svg>