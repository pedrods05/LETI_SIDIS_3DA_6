<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="2012.5px" preserveAspectRatio="none" style="width:2181px;height:2012px;background:#FFFFFF;" version="1.1" viewBox="0 0 2181 2012" width="2181.25px" zoomAndPan="magnify"><title>C4: Sequence Diagram - Create Appointment (Public)</title><defs/><g><text fill="#000000" font-family="Arial" font-size="21.875" font-weight="bold" lengthAdjust="spacing" textLength="553.038" x="816.0408" y="43.2404">C4: Sequence Diagram - Create Appointment (Public)</text><g><title>AppointmentController</title><rect fill="#FFFFFF" height="414.0625" style="stroke:#181818;stroke-width:1.5625;" width="15.625" x="541.8419" y="253.6377"/></g><g><title>AppointmentService</title><rect fill="#FFFFFF" height="302.2339" style="stroke:#181818;stroke-width:1.5625;" width="15.625" x="925.8614" y="298.2056"/></g><g><title>PhysicianRepository</title><rect fill="#FFFFFF" height="81.3232" style="stroke:#181818;stroke-width:1.5625;" width="15.625" x="1526.0971" y="342.7734"/></g><g><title>ExternalServiceClient</title><rect fill="#FFFFFF" height="81.3232" style="stroke:#181818;stroke-width:1.5625;" width="15.625" x="1767.244" y="745.0806"/></g><g><title>ExternalServiceClient</title><rect fill="#FFFFFF" height="81.3232" style="stroke:#181818;stroke-width:1.5625;" width="15.625" x="1767.244" y="958.5449"/></g><g><title>AppointmentRepository</title><rect fill="#FFFFFF" height="44.5679" style="stroke:#181818;stroke-width:1.5625;" width="15.625" x="2022.9919" y="1292.0288"/></g><rect fill="none" height="335.8643" style="stroke:#000000;stroke-width:2.3438;" width="1643.9362" x="15.625" y="366.2109"/><rect fill="none" height="1093.6035" style="stroke:#000000;stroke-width:2.3438;" width="2155.4321" x="15.625" y="768.5181"/><rect fill="none" height="267.041" style="stroke:#000000;stroke-width:2.3438;" width="1096.9475" x="809.2293" y="981.9824"/><rect fill="none" height="200.5981" style="stroke:#000000;stroke-width:2.3438;" width="732.4928" x="809.2293" y="1538.7573"/><g><title>Client</title><rect fill="#000000" fill-opacity="0.00000" height="1705.4321" width="12.5" x="57.6508" y="183.252"/><line style="stroke:#181818;stroke-width:0.7813;stroke-dasharray:7.8125,7.8125;" x1="62.5" x2="62.5" y1="183.252" y2="1888.6841"/></g><g><title>AppointmentController</title><rect fill="#000000" fill-opacity="0.00000" height="1705.4321" width="12.5" x="543.4044" y="183.252"/><line style="stroke:#181818;stroke-width:0.7813;stroke-dasharray:7.8125,7.8125;" x1="548.642" x2="548.642" y1="183.252" y2="1888.6841"/></g><g><title>AppointmentService</title><rect fill="#000000" fill-opacity="0.00000" height="1705.4321" width="12.5" x="927.4239" y="183.252"/><line style="stroke:#181818;stroke-width:0.7813;stroke-dasharray:7.8125,7.8125;" x1="932.6668" x2="932.6668" y1="183.252" y2="1888.6841"/></g><g><title>PhysicianRepository</title><rect fill="#000000" fill-opacity="0.00000" height="1705.4321" width="12.5" x="1527.6596" y="183.252"/><line style="stroke:#181818;stroke-width:0.7813;stroke-dasharray:7.8125,7.8125;" x1="1533.2581" x2="1533.2581" y1="183.252" y2="1888.6841"/></g><g><title>ExternalServiceClient</title><rect fill="#000000" fill-opacity="0.00000" height="1705.4321" width="12.5" x="1768.8065" y="183.252"/><line style="stroke:#181818;stroke-width:0.7813;stroke-dasharray:7.8125,7.8125;" x1="1773.6237" x2="1773.6237" y1="183.252" y2="1888.6841"/></g><g><title>AppointmentRepository</title><rect fill="#000000" fill-opacity="0.00000" height="1705.4321" width="12.5" x="2024.5544" y="183.252"/><line style="stroke:#181818;stroke-width:0.7813;stroke-dasharray:7.8125,7.8125;" x1="2029.6143" x2="2029.6143" y1="183.252" y2="1888.6841"/></g><g class="participant participant-head" data-participant="Client"><text fill="#000000" font-family="Arial" font-size="21.875" lengthAdjust="spacing" textLength="55.9265" x="31.25" y="178.6163">Client</text><ellipse cx="63.9008" cy="78.3447" fill="#E2E2F0" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.7813;"/><path d="M63.9008,90.8447 L63.9008,133.0322 M43.5883,103.3447 L84.2133,103.3447 M63.9008,133.0322 L43.5883,156.4697 M63.9008,133.0322 L84.2133,156.4697" fill="none" style="stroke:#181818;stroke-width:0.7813;"/></g><g class="participant participant-tail" data-participant="Client"><text fill="#000000" font-family="Arial" font-size="21.875" lengthAdjust="spacing" textLength="55.9265" x="31.25" y="1906.9244">Client</text><ellipse cx="63.9008" cy="1924.8413" fill="#E2E2F0" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.7813;"/><path d="M63.9008,1937.3413 L63.9008,1979.5288 M43.5883,1949.8413 L84.2133,1949.8413 M63.9008,1979.5288 L43.5883,2002.9663 M63.9008,1979.5288 L84.2133,2002.9663" fill="none" style="stroke:#181818;stroke-width:0.7813;"/></g><g class="participant participant-head" data-participant="Controller"><rect fill="#E2E2F0" height="46.3135" rx="3.9063" ry="3.9063" style="stroke:#181818;stroke-width:0.7813;" width="239.5248" x="429.892" y="135.376"/><text fill="#000000" font-family="Arial" font-size="21.875" lengthAdjust="spacing" textLength="217.6498" x="440.8295" y="166.1163">AppointmentController</text></g><g class="participant participant-tail" data-participant="Controller"><rect fill="#E2E2F0" height="46.3135" rx="3.9063" ry="3.9063" style="stroke:#181818;stroke-width:0.7813;" width="239.5248" x="429.892" y="1887.1216"/><text fill="#000000" font-family="Arial" font-size="21.875" lengthAdjust="spacing" textLength="217.6498" x="440.8295" y="1917.8619">AppointmentController</text></g><g class="participant participant-head" data-participant="Service"><rect fill="#E2E2F0" height="46.3135" rx="3.9063" ry="3.9063" style="stroke:#181818;stroke-width:0.7813;" width="217.6392" x="824.8543" y="135.376"/><text fill="#000000" font-family="Arial" font-size="21.875" lengthAdjust="spacing" textLength="195.7642" x="835.7918" y="166.1163">AppointmentService</text></g><g class="participant participant-tail" data-participant="Service"><rect fill="#E2E2F0" height="46.3135" rx="3.9063" ry="3.9063" style="stroke:#181818;stroke-width:0.7813;" width="217.6392" x="824.8543" y="1887.1216"/><text fill="#000000" font-family="Arial" font-size="21.875" lengthAdjust="spacing" textLength="195.7642" x="835.7918" y="1917.8619">AppointmentService</text></g><g class="participant participant-head" data-participant="PhysicianRepo"><rect fill="#E2E2F0" height="46.3135" rx="3.9063" ry="3.9063" style="stroke:#181818;stroke-width:0.7813;" width="220.0531" x="1423.8831" y="135.376"/><text fill="#000000" font-family="Arial" font-size="21.875" lengthAdjust="spacing" textLength="198.1781" x="1434.8206" y="166.1163">PhysicianRepository</text></g><g class="participant participant-tail" data-participant="PhysicianRepo"><rect fill="#E2E2F0" height="46.3135" rx="3.9063" ry="3.9063" style="stroke:#181818;stroke-width:0.7813;" width="220.0531" x="1423.8831" y="1887.1216"/><text fill="#000000" font-family="Arial" font-size="21.875" lengthAdjust="spacing" textLength="198.1781" x="1434.8206" y="1917.8619">PhysicianRepository</text></g><g class="participant participant-head" data-participant="ExtClient"><rect fill="#E2E2F0" height="46.3135" rx="3.9063" ry="3.9063" style="stroke:#181818;stroke-width:0.7813;" width="230.9906" x="1659.5612" y="135.376"/><text fill="#000000" font-family="Arial" font-size="21.875" lengthAdjust="spacing" textLength="209.1156" x="1670.4987" y="166.1163">ExternalServiceClient</text></g><g class="participant participant-tail" data-participant="ExtClient"><rect fill="#E2E2F0" height="46.3135" rx="3.9063" ry="3.9063" style="stroke:#181818;stroke-width:0.7813;" width="230.9906" x="1659.5612" y="1887.1216"/><text fill="#000000" font-family="Arial" font-size="21.875" lengthAdjust="spacing" textLength="209.1156" x="1670.4987" y="1917.8619">ExternalServiceClient</text></g><g class="participant participant-head" data-participant="ApptRepo"><rect fill="#E2E2F0" height="46.3135" rx="3.9063" ry="3.9063" style="stroke:#181818;stroke-width:0.7813;" width="249.2554" x="1906.1768" y="135.376"/><text fill="#000000" font-family="Arial" font-size="21.875" lengthAdjust="spacing" textLength="227.3804" x="1917.1143" y="166.1163">AppointmentRepository</text></g><g class="participant participant-tail" data-participant="ApptRepo"><rect fill="#E2E2F0" height="46.3135" rx="3.9063" ry="3.9063" style="stroke:#181818;stroke-width:0.7813;" width="249.2554" x="1906.1768" y="1887.1216"/><text fill="#000000" font-family="Arial" font-size="21.875" lengthAdjust="spacing" textLength="227.3804" x="1917.1143" y="1917.8619">AppointmentRepository</text></g><g><title>AppointmentController</title><rect fill="#FFFFFF" height="414.0625" style="stroke:#181818;stroke-width:1.5625;" width="15.625" x="541.8419" y="253.6377"/></g><g><title>AppointmentService</title><rect fill="#FFFFFF" height="302.2339" style="stroke:#181818;stroke-width:1.5625;" width="15.625" x="925.8614" y="298.2056"/></g><g><title>PhysicianRepository</title><rect fill="#FFFFFF" height="81.3232" style="stroke:#181818;stroke-width:1.5625;" width="15.625" x="1526.0971" y="342.7734"/></g><g><title>ExternalServiceClient</title><rect fill="#FFFFFF" height="81.3232" style="stroke:#181818;stroke-width:1.5625;" width="15.625" x="1767.244" y="745.0806"/></g><g><title>ExternalServiceClient</title><rect fill="#FFFFFF" height="81.3232" style="stroke:#181818;stroke-width:1.5625;" width="15.625" x="1767.244" y="958.5449"/></g><g><title>AppointmentRepository</title><rect fill="#FFFFFF" height="44.5679" style="stroke:#181818;stroke-width:1.5625;" width="15.625" x="2022.9919" y="1292.0288"/></g><g class="message" data-participant-1="Client" data-participant-2="Controller"><polygon fill="#181818" points="523.0919,247.3877,538.7169,253.6377,523.0919,259.8877,529.3419,253.6377" style="stroke:#181818;stroke-width:1.5625;"/><line style="stroke:#181818;stroke-width:1.5625;" x1="63.9008" x2="532.4669" y1="253.6377" y2="253.6377"/><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="221.2952" x="74.8383" y="223.5153">POST /api/appointments</text><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="448.2536" x="74.8383" y="246.2082">ScheduleAppointmentRequest (appointmentDTO)</text></g><g class="message" data-participant-1="Controller" data-participant-2="Service"><polygon fill="#181818" points="907.1114,291.9556,922.7364,298.2056,907.1114,304.4556,913.3614,298.2056" style="stroke:#181818;stroke-width:1.5625;"/><line style="stroke:#181818;stroke-width:1.5625;" x1="557.4669" x2="916.4864" y1="298.2056" y2="298.2056"/><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="338.707" x="568.4044" y="290.7761">createAppointment(appointmentDTO)</text></g><g class="message" data-participant-1="Service" data-participant-2="PhysicianRepo"><polygon fill="#181818" points="1507.3471,336.5234,1522.9721,342.7734,1507.3471,349.0234,1513.5971,342.7734" style="stroke:#181818;stroke-width:1.5625;"/><line style="stroke:#181818;stroke-width:1.5625;" x1="941.4864" x2="1516.7221" y1="342.7734" y2="342.7734"/><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="222.4258" x="952.4239" y="335.3439">findById(dto.physicianId)</text></g><path d="M15.625,366.2109 L109.642,366.2109 L109.642,376.4038 L94.017,392.0288 L15.625,392.0288 L15.625,366.2109" fill="#EEEEEE" style="stroke:#000000;stroke-width:2.3438;"/><rect fill="none" height="335.8643" style="stroke:#000000;stroke-width:2.3438;" width="1643.9362" x="15.625" y="366.2109"/><text fill="#000000" font-family="Arial" font-size="20.3125" font-weight="bold" lengthAdjust="spacing" textLength="23.7045" x="39.0625" y="386.1618">alt</text><text fill="#000000" font-family="Arial" font-size="17.1875" font-weight="bold" lengthAdjust="spacing" textLength="144.1887" x="133.0795" y="384.8953">[Physician found]</text><g class="message" data-participant-1="PhysicianRepo" data-participant-2="Service"><polygon fill="#181818" points="958.6739,417.8467,943.0489,424.0967,958.6739,430.3467,952.4239,424.0967" style="stroke:#181818;stroke-width:1.5625;"/><line style="stroke:#181818;stroke-width:1.5625;stroke-dasharray:3.125,3.125;" x1="949.2989" x2="1532.3471" y1="424.0967" y2="424.0967"/><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="273.2368" x="968.0489" y="416.6672">Optional&lt;Physician&gt; (present)</text></g><line style="stroke:#000000;stroke-width:1.5625;stroke-dasharray:3.125,3.125;" x1="15.625" x2="1659.5612" y1="438.1592" y2="438.1592"/><text fill="#000000" font-family="Arial" font-size="17.1875" font-weight="bold" lengthAdjust="spacing" textLength="175.6851" x="23.4375" y="453.7186">[Physician not found]</text><g class="message" data-participant-1="PhysicianRepo" data-participant-2="Service"><polygon fill="#181818" points="958.6739,484.7412,943.0489,490.9912,958.6739,497.2412,952.4239,490.9912" style="stroke:#181818;stroke-width:1.5625;"/><line style="stroke:#181818;stroke-width:1.5625;stroke-dasharray:3.125,3.125;" x1="949.2989" x2="1532.3471" y1="490.9912" y2="490.9912"/><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="136.6135" x="968.0489" y="483.5617">Optional.empty</text></g><g class="message" data-participant-1="Service" data-participant-2="Service"><line style="stroke:#181818;stroke-width:1.5625;" x1="941.4864" x2="1007.1114" y1="535.5591" y2="535.5591"/><line style="stroke:#181818;stroke-width:1.5625;" x1="1007.1114" x2="1007.1114" y1="535.5591" y2="555.8716"/><line style="stroke:#181818;stroke-width:1.5625;" x1="943.0489" x2="1007.1114" y1="555.8716" y2="555.8716"/><polygon fill="#181818" points="958.6739,549.6216,943.0489,555.8716,958.6739,562.1216,952.4239,555.8716" style="stroke:#181818;stroke-width:1.5625;"/><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="425.3922" x="952.4239" y="528.1296">throw RuntimeException("Physician not found")</text></g><g class="message" data-participant-1="Service" data-participant-2="Controller"><polygon fill="#181818" points="574.6544,594.1895,559.0294,600.4395,574.6544,606.6895,568.4044,600.4395" style="stroke:#181818;stroke-width:1.5625;"/><line style="stroke:#181818;stroke-width:1.5625;stroke-dasharray:3.125,3.125;" x1="565.2794" x2="932.1114" y1="600.4395" y2="600.4395"/><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="164.8407" x="584.0294" y="593.0099">RuntimeException</text></g><g class="message" data-participant-1="Controller" data-participant-2="Client"><polygon fill="#181818" points="81.0883,661.4502,65.4633,667.7002,81.0883,673.9502,74.8383,667.7002" style="stroke:#181818;stroke-width:1.5625;"/><line style="stroke:#181818;stroke-width:1.5625;stroke-dasharray:3.125,3.125;" x1="71.7133" x2="548.0919" y1="667.7002" y2="667.7002"/><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="156.9756" x="90.4633" y="637.5778">400 Bad Request</text><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="285.1585" x="90.4633" y="660.2707">{ "error": "Physician not found" }</text></g><g class="message" data-participant-1="Client" data-participant-2="Controller"><polygon fill="#181818" points="530.9044,683.3252,546.5294,689.5752,530.9044,695.8252,537.1544,689.5752" style="stroke:#181818;stroke-width:1.5625;"/><line style="stroke:#181818;stroke-width:1.5625;stroke-dasharray:3.125,3.125;" x1="63.9008" x2="540.2794" y1="689.5752" y2="689.5752"/></g><g class="message" data-participant-1="Service" data-participant-2="ExtClient"><polygon fill="#181818" points="1748.494,738.8306,1764.119,745.0806,1748.494,751.3306,1754.744,745.0806" style="stroke:#181818;stroke-width:1.5625;"/><line style="stroke:#181818;stroke-width:1.5625;" x1="933.6739" x2="1757.869" y1="745.0806" y2="745.0806"/><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="431.3133" x="944.6114" y="737.6511">createAppointmentInRecords(appointmentData)</text></g><path d="M15.625,768.5181 L109.642,768.5181 L109.642,778.7109 L94.017,794.3359 L15.625,794.3359 L15.625,768.5181" fill="#EEEEEE" style="stroke:#000000;stroke-width:2.3438;"/><rect fill="none" height="1093.6035" style="stroke:#000000;stroke-width:2.3438;" width="2155.4321" x="15.625" y="768.5181"/><text fill="#000000" font-family="Arial" font-size="20.3125" font-weight="bold" lengthAdjust="spacing" textLength="23.7045" x="39.0625" y="788.4689">alt</text><text fill="#000000" font-family="Arial" font-size="17.1875" font-weight="bold" lengthAdjust="spacing" textLength="205.3268" x="133.0795" y="787.2025">[Created in records (OK)]</text><g class="message" data-participant-1="ExtClient" data-participant-2="Service"><polygon fill="#181818" points="950.8614,820.1538,935.2364,826.4038,950.8614,832.6538,944.6114,826.4038" style="stroke:#181818;stroke-width:1.5625;"/><line style="stroke:#181818;stroke-width:1.5625;stroke-dasharray:3.125,3.125;" x1="941.4864" x2="1773.494" y1="826.4038" y2="826.4038"/><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="73.4245" x="960.2364" y="818.9743">201/200</text></g><g class="message" data-participant-1="Service" data-participant-2="Service"><line style="stroke:#181818;stroke-width:1.5625;" x1="933.6739" x2="999.2989" y1="893.6646" y2="893.6646"/><line style="stroke:#181818;stroke-width:1.5625;" x1="999.2989" x2="999.2989" y1="893.6646" y2="913.9771"/><line style="stroke:#181818;stroke-width:1.5625;" x1="935.2364" x2="999.2989" y1="913.9771" y2="913.9771"/><polygon fill="#181818" points="950.8614,907.7271,935.2364,913.9771,950.8614,920.2271,944.6114,913.9771" style="stroke:#181818;stroke-width:1.5625;"/><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="211.129" x="944.6114" y="863.5422">Appointment.builder(...)</text><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="326.2993" x="944.6114" y="886.235">.set fields (+wasRescheduled=false)</text></g><g class="message" data-participant-1="Service" data-participant-2="ExtClient"><polygon fill="#181818" points="1748.494,952.2949,1764.119,958.5449,1748.494,964.7949,1754.744,958.5449" style="stroke:#181818;stroke-width:1.5625;"/><line style="stroke:#181818;stroke-width:1.5625;" x1="933.6739" x2="1757.869" y1="958.5449" y2="958.5449"/><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="257.457" x="944.6114" y="951.1154">getPatientById(dto.patientId)</text></g><path d="M809.2293,981.9824 L903.2463,981.9824 L903.2463,992.1753 L887.6213,1007.8003 L809.2293,1007.8003 L809.2293,981.9824" fill="#EEEEEE" style="stroke:#000000;stroke-width:2.3438;"/><rect fill="none" height="267.041" style="stroke:#000000;stroke-width:2.3438;" width="1096.9475" x="809.2293" y="981.9824"/><text fill="#000000" font-family="Arial" font-size="20.3125" font-weight="bold" lengthAdjust="spacing" textLength="23.7045" x="832.6668" y="1001.9333">alt</text><text fill="#000000" font-family="Arial" font-size="17.1875" font-weight="bold" lengthAdjust="spacing" textLength="174.762" x="926.6838" y="1000.6668">[Patient data fetched]</text><g class="message" data-participant-1="ExtClient" data-participant-2="Service"><polygon fill="#181818" points="950.8614,1033.6182,935.2364,1039.8682,950.8614,1046.1182,944.6114,1039.8682" style="stroke:#181818;stroke-width:1.5625;"/><line style="stroke:#181818;stroke-width:1.5625;stroke-dasharray:3.125,3.125;" x1="941.4864" x2="1773.494" y1="1039.8682" y2="1039.8682"/><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="304.8462" x="960.2364" y="1032.4387">{ fullName, email, phoneNumber }</text></g><g class="message" data-participant-1="Service" data-participant-2="Service"><line style="stroke:#181818;stroke-width:1.5625;" x1="933.6739" x2="999.2989" y1="1084.436" y2="1084.436"/><line style="stroke:#181818;stroke-width:1.5625;" x1="999.2989" x2="999.2989" y1="1084.436" y2="1104.7485"/><line style="stroke:#181818;stroke-width:1.5625;" x1="935.2364" x2="999.2989" y1="1104.7485" y2="1104.7485"/><polygon fill="#181818" points="950.8614,1098.4985,935.2364,1104.7485,950.8614,1110.9985,944.6114,1104.7485" style="stroke:#181818;stroke-width:1.5625;"/><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="264.2212" x="944.6114" y="1077.0065">set patientName/email/phone</text></g><line style="stroke:#000000;stroke-width:1.5625;stroke-dasharray:3.125,3.125;" x1="809.2293" x2="1906.1768" y1="1118.811" y2="1118.811"/><text fill="#000000" font-family="Arial" font-size="17.1875" font-weight="bold" lengthAdjust="spacing" textLength="200.5264" x="817.0418" y="1134.3704">[Failure fetching patient]</text><g class="message" data-participant-1="ExtClient" data-participant-2="Service"><polygon fill="#181818" points="950.8614,1165.3931,935.2364,1171.6431,950.8614,1177.8931,944.6114,1171.6431" style="stroke:#181818;stroke-width:1.5625;"/><line style="stroke:#181818;stroke-width:1.5625;stroke-dasharray:3.125,3.125;" x1="941.4864" x2="1773.494" y1="1171.6431" y2="1171.6431"/><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="89.2044" x="960.2364" y="1164.2136">Exception</text></g><g class="message" data-participant-1="Service" data-participant-2="Service"><line style="stroke:#181818;stroke-width:1.5625;" x1="933.6739" x2="999.2989" y1="1216.2109" y2="1216.2109"/><line style="stroke:#181818;stroke-width:1.5625;" x1="999.2989" x2="999.2989" y1="1216.2109" y2="1236.5234"/><line style="stroke:#181818;stroke-width:1.5625;" x1="935.2364" x2="999.2989" y1="1236.5234" y2="1236.5234"/><polygon fill="#181818" points="950.8614,1230.2734,935.2364,1236.5234,950.8614,1242.7734,944.6114,1236.5234" style="stroke:#181818;stroke-width:1.5625;"/><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="402.8481" x="944.6114" y="1208.7814">log warning("Could not fetch patient data ...")</text></g><g class="message" data-participant-1="Service" data-participant-2="ApptRepo"><polygon fill="#181818" points="2004.2419,1285.7788,2019.8669,1292.0288,2004.2419,1298.2788,2010.4919,1292.0288" style="stroke:#181818;stroke-width:1.5625;"/><line style="stroke:#181818;stroke-width:1.5625;" x1="933.6739" x2="2013.6169" y1="1292.0288" y2="1292.0288"/><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="168.2327" x="944.6114" y="1284.5993">save(appointment)</text></g><g class="message" data-participant-1="ApptRepo" data-participant-2="Service"><polygon fill="#181818" points="950.8614,1330.3467,935.2364,1336.5967,950.8614,1342.8467,944.6114,1336.5967" style="stroke:#181818;stroke-width:1.5625;"/><line style="stroke:#181818;stroke-width:1.5625;stroke-dasharray:3.125,3.125;" x1="941.4864" x2="2029.2419" y1="1336.5967" y2="1336.5967"/><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="200.9727" x="960.2364" y="1329.1672">Appointment (created)</text></g><g class="message" data-participant-1="Service" data-participant-2="Controller"><polygon fill="#181818" points="566.8419,1374.9146,551.2169,1381.1646,566.8419,1387.4146,560.5919,1381.1646" style="stroke:#181818;stroke-width:1.5625;"/><line style="stroke:#181818;stroke-width:1.5625;stroke-dasharray:3.125,3.125;" x1="557.4669" x2="932.1114" y1="1381.1646" y2="1381.1646"/><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="200.9727" x="576.2169" y="1373.735">Appointment (created)</text></g><g class="message" data-participant-1="Controller" data-participant-2="Client"><polygon fill="#181818" points="81.0883,1442.1753,65.4633,1448.4253,81.0883,1454.6753,74.8383,1448.4253" style="stroke:#181818;stroke-width:1.5625;"/><line style="stroke:#181818;stroke-width:1.5625;stroke-dasharray:3.125,3.125;" x1="71.7133" x2="548.0919" y1="1448.4253" y2="1448.4253"/><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="68.882" x="90.4633" y="1418.3029">200 OK</text><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="206.6559" x="90.4633" y="1440.9958">{ createdAppointment }</text></g><line style="stroke:#000000;stroke-width:1.5625;stroke-dasharray:3.125,3.125;" x1="15.625" x2="2171.0571" y1="1462.4878" y2="1462.4878"/><text fill="#000000" font-family="Arial" font-size="17.1875" font-weight="bold" lengthAdjust="spacing" textLength="328.5431" x="23.4375" y="1478.0472">[MicroserviceCommunicationException]</text><g class="message" data-participant-1="ExtClient" data-participant-2="Service"><polygon fill="#181818" points="950.8614,1509.0698,935.2364,1515.3198,950.8614,1521.5698,944.6114,1515.3198" style="stroke:#181818;stroke-width:1.5625;"/><line style="stroke:#181818;stroke-width:1.5625;stroke-dasharray:3.125,3.125;" x1="941.4864" x2="1773.494" y1="1515.3198" y2="1515.3198"/><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="461.6829" x="960.2364" y="1507.8903">throws MicroserviceCommunicationException(msg)</text></g><path d="M809.2293,1538.7573 L903.2463,1538.7573 L903.2463,1548.9502 L887.6213,1564.5752 L809.2293,1564.5752 L809.2293,1538.7573" fill="#EEEEEE" style="stroke:#000000;stroke-width:2.3438;"/><rect fill="none" height="200.5981" style="stroke:#000000;stroke-width:2.3438;" width="732.4928" x="809.2293" y="1538.7573"/><text fill="#000000" font-family="Arial" font-size="20.3125" font-weight="bold" lengthAdjust="spacing" textLength="23.7045" x="832.6668" y="1558.7082">alt</text><text fill="#000000" font-family="Arial" font-size="17.1875" font-weight="bold" lengthAdjust="spacing" textLength="296.1906" x="926.6838" y="1557.4417">[msg contains "conflict" or "exists"]</text><g class="message" data-participant-1="Service" data-participant-2="Service"><line style="stroke:#181818;stroke-width:1.5625;" x1="933.6739" x2="999.2989" y1="1619.3359" y2="1619.3359"/><line style="stroke:#181818;stroke-width:1.5625;" x1="999.2989" x2="999.2989" y1="1619.3359" y2="1639.6484"/><line style="stroke:#181818;stroke-width:1.5625;" x1="935.2364" x2="999.2989" y1="1639.6484" y2="1639.6484"/><polygon fill="#181818" points="950.8614,1633.3984,935.2364,1639.6484,950.8614,1645.8984,944.6114,1639.6484" style="stroke:#181818;stroke-width:1.5625;"/><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="577.3987" x="944.6114" y="1589.2136">throw RuntimeException("Physician already has an appointment</text><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="232.9987" x="944.6114" y="1611.9064">or appointment ID exists")</text></g><line style="stroke:#000000;stroke-width:1.5625;stroke-dasharray:3.125,3.125;" x1="809.2293" x2="1541.7221" y1="1653.7109" y2="1653.7109"/><text fill="#000000" font-family="Arial" font-size="17.1875" font-weight="bold" lengthAdjust="spacing" textLength="213.0226" x="817.0418" y="1669.2703">[Other microservice error]</text><g class="message" data-participant-1="Service" data-participant-2="Service"><line style="stroke:#181818;stroke-width:1.5625;" x1="933.6739" x2="999.2989" y1="1706.543" y2="1706.543"/><line style="stroke:#181818;stroke-width:1.5625;" x1="999.2989" x2="999.2989" y1="1706.543" y2="1726.8555"/><line style="stroke:#181818;stroke-width:1.5625;" x1="935.2364" x2="999.2989" y1="1726.8555" y2="1726.8555"/><polygon fill="#181818" points="950.8614,1720.6055,935.2364,1726.8555,950.8614,1733.1055,944.6114,1726.8555" style="stroke:#181818;stroke-width:1.5625;"/><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="578.3607" x="944.6114" y="1699.1135">throw RuntimeException("Failed to create appointment: " + msg)</text></g><g class="message" data-participant-1="Service" data-participant-2="Controller"><polygon fill="#181818" points="566.8419,1776.1108,551.2169,1782.3608,566.8419,1788.6108,560.5919,1782.3608" style="stroke:#181818;stroke-width:1.5625;"/><line style="stroke:#181818;stroke-width:1.5625;stroke-dasharray:3.125,3.125;" x1="557.4669" x2="932.1114" y1="1782.3608" y2="1782.3608"/><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="164.8407" x="576.2169" y="1774.9313">RuntimeException</text></g><g class="message" data-participant-1="Controller" data-participant-2="Client"><polygon fill="#181818" points="81.0883,1843.3716,65.4633,1849.6216,81.0883,1855.8716,74.8383,1849.6216" style="stroke:#181818;stroke-width:1.5625;"/><line style="stroke:#181818;stroke-width:1.5625;stroke-dasharray:3.125,3.125;" x1="71.7133" x2="548.0919" y1="1849.6216" y2="1849.6216"/><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="156.9756" x="90.4633" y="1819.4992">400 Bad Request</text><text fill="#000000" font-family="Arial" font-size="20.3125" lengthAdjust="spacing" textLength="254.9179" x="90.4633" y="1842.1921">{ "error": mapped message }</text></g><!--SRC=[lLR1JkCm4BtdAqOvfM9f2s8lQ1TfQK52Q2a2ZbnCF6sjTUoixG0LujztxAIDKpK5BdkeLDipRyPltenZ_mXLCiCAuAM0e-_Zn6vsx99n_IBK0kPCMenEfZXdbNINMhaRLY3yCeB99772IOJ9oIdSuzyALOum5MpXFGvXOf0vCYrBBPGhK3d8RgidAV91ah3SQGCJAMWxeHXEvA9aP996zXCAPxIKQ59W5jfbhySzccUHOp1l_dTjRvShImkcxh3KLb0Igs3SsU-wNBmwD8h91g_EEJZHoGSts8f29s4hIMe_E3oBRWMdS3kxVu0HAmNzDY3sKTtdI-ILn0uqCMw9qyXo-Z0RU6h5isS-uYk9eb3CvYeKC0z5Yc3xuTPy9cjl0khGHd1peVZvwefdtEbXkJwyuX5CbsacNRi3Srqfdi0Mx64durdfXAPo_DWOdK5M6hIKy81yEVQ4Gf9q54jfzwLuGonAjzeN021YfWLmIwDVuAvIJXHuyPfZ0CpI7QcaWnXaMnpR4DrSrkM1s2bWr58xXPFn6CuPXqOvZ-eDKZH6c_GKTcO3xzqGaQ003BhAg0I9m5WHcvxO9Quh8YhNXjkEofXZaJxQflBQg8S81w4eO725R7RjQMe3TUjrF3uQ7O_7tSnRqBugHLaEdoeXEPfiE1mE7jNG8X4YKFhO1o_Ctg5jsf7_38Doi8KQSx10TykSNxHzKQzzLm3iI94sVLVKLi297fYZyo7fgF_YRp2lfFJZ-HjWmOJy1kLIAxofYYUImdjmtic9FzX9Yhzvawt77GNOKK0bfz1GbxHJ6Qmpz4z7OxytrLZ2Nyr9wWMyCACeLfPET2LvhLWVVnsy9etA5negIBI3jfx3_ehi6MCrTcgocTVGkXpsoGQoMkzyQmgrGtzFRty2v-C69zd3xDhtTOCGe_RtSZqPVulSQDkySReeAYLovciK5wkle676sKzWP8LT3FRqfbS-cK1EwJ6XBAJqRqxV3FJYqWT3Yg_2Eflso-FZQSiaaSDNiAG7sIzRZXuLXOZMS3M59k1WhVUPMnBjHNHH23Fqwndvpg79vdHJhJWo3MGuW8QhRVt-ptUXeAGeoGAjPGlS8oAVv3y0]--></g></svg>