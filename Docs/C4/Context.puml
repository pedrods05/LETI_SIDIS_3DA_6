@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Context.puml

LAYOUT_WITH_LEGEND()

Person(user, "User", "Paciente, médico, admin")
System_Boundary(hap, "HAP Platform") {
  System(auth, "Auth Service", "JWT/OAuth2")
  System(patients, "Patients Service", "Gestão de perfis de pacientes")
  System(physicians, "Physicians Service", "Perfis de médicos e disponibilidades")
  System(appointments, "AppointmentRecords Service", "Agendamento e ciclo de vida de consultas (MongoDB)")
}

Rel(user, auth, "Login, token", "HTTPS")
Rel(user, patients, "CRUD de paciente", "HTTPS + JWT")
Rel(user, physicians, "CRUD de médico", "HTTPS + JWT")
Rel(user, appointments, "Marcar/gerir consultas", "HTTPS + JWT")
Rel(appointments, patients, "Validação de patientId", "REST")
Rel(appointments, physicians, "Validação de physicianId", "REST")

SHOW_LEGEND()
@enduml

